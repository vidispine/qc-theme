(this["webpackJsonpqc-theme"]=this["webpackJsonpqc-theme"]||[]).push([[0],{230:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(54),c=a.n(i),o=a(53),s=a(312),l=a(311),u=a(353),d=a(48),j=a(148),b=(a(186),Object(j.a)({components:{VdtUserAvatarButton:{styleOverrides:{avatar:{fontSize:"0.875rem",height:32,width:32}}},MuiTabs:{styleOverrides:{root:{backgroundColor:"#fff",borderBottom:"2px solid #7B61FF"},indicator:{backgroundColor:"#7B61FF",height:"100%",zIndex:1},flexContainer:{alignItems:"center"}}},MuiTab:{styleOverrides:{root:{zIndex:2,color:"inherit",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&.Mui-selected":{color:"#fff"}}}},MuiPaper:{styleOverrides:{root:{position:"relative",overflow:"hidden",flexShrink:0}},defaultProps:{variant:"outlined"}},MuiAvatar:{styleOverrides:{colorDefault:{color:"inherit",backgroundColor:"#f2f2f2"}}}},typography:{useNextVariants:!0,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{mode:"light",primary:{main:"#7B61FF"},secondary:{main:"#00b16a"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)",default:"#f2f2f2",paper:"#fff"}},mixins:{toolbar:{minHeight:56}}})),h=a(12),O=a(25),f=a(314),m=a(27),p=a(102),v=a(7),x=a(26),g=a(328),y=a(330),C=a(331),A=a(332),E=a(333),S=a(1),T=["Dialog"],I=function(e){var t=e.open,a=e.onClose,r=e.onSuccess,n=e.title,i=void 0===n?"Dialog":n,c=e.okText,o=void 0===c?"Ok":c,s=e.noText,l=void 0===s?"Cancel":s,u=e.message,d=void 0===u?"Message":u,j=e.Dialog,b=void 0===j?g.a:j;return Object(S.jsxs)(b,{open:t,onClose:a,children:[Object(S.jsx)(y.a,{children:i}),Object(S.jsx)(C.a,{dividers:!0,children:d}),Object(S.jsxs)(A.a,{children:[Object(S.jsx)(E.a,{onClick:a,children:l}),Object(S.jsx)(E.a,{variant:"contained",color:"primary",onClick:r,children:o})]})]})},R=function(e){var t=e.Dialog,a=void 0===t?I:t,r=Object(x.a)(e,T);return Object(S.jsx)(a,Object(v.a)({},r))},k=n.a.createContext({}),P=function(e){var t=e.children,a=n.a.useState(!1),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useState({}),s=Object(h.a)(o,2),l=s[0],u=l.config,d=l.resolve,j=l.reject,b=s[1],O=function(){c(!1)};return Object(S.jsxs)(k.Provider,{value:{openDialog:function(e){c(!0),b(e)}},children:[Object(S.jsx)(R,Object(v.a)(Object(v.a)({},u),{},{open:i,onSuccess:function(e){d(e),O()},onClose:function(e){j(e),O()}})),t]})},N=function(){var e=n.a.useContext(k).openDialog;return{showDialog:function(t){return new Promise((function(a,r){return e({config:t,resolve:a,reject:r})}))}}},D=a(327),w=a(11),_=n.a.createContext();var H=function(e){var t=e.children,a=Object(D.a)(["preset"],(function(){return w.c.listAnalyzePreset().then((function(e){var t=e.data,a=(void 0===t?{}:t).preset;return(void 0===a?[]:a).map((function(e){return e.name}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),r=a.data,i=void 0===r?[]:r,c=a.isLoading,o=a.isError,s=n.a.useState(""),l=Object(h.a)(s,2),u=l[0],d=l[1],j=n.a.useMemo((function(){return u?i.filter((function(e){return e.toLowerCase().includes(u.toLowerCase())})):i}),[u,i]);return Object(S.jsx)(_.Provider,{value:{presets:j,onSearch:function(e){return d(e)},isLoading:c,isError:o},children:t})};var L=a(5),F=n.a.createContext({splitters:{}}),G="LAYOUT_SPLITTERS",M=function(e){var t=e.splitters,a=e.children,r=n.a.useState((function(){return function(){try{return JSON.parse(localStorage.getItem(G))||t}catch(e){return t}}()})),i=Object(h.a)(r,2),c=i[0],o=i[1];n.a.useEffect((function(){localStorage.setItem(G,JSON.stringify(c))}),[c]);return Object(S.jsx)(F.Provider,{value:{splitters:c,resetSplitters:function(){o(t)},setSplitter:function(e,t){o((function(a){return Object(v.a)(Object(v.a)({},a),{},Object(L.a)({},e,t))}))}},children:a})};a(137);var q=n.a.createContext();function B(){return Object(D.a)(["resources"],(function(){return w.n.listResourceType({resourceType:"vidinet"}).then((function(e){var t=e.data;return(void 0===t?{}:t).resource.map((function(e){var t=e.id,a=e.vidinet;return Object(v.a)({id:t},a)}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var U=function(e){var t=e.children,a=B(),r=a.data,n=a.isLoading,i=a.isError;return Object(S.jsx)(q.Provider,{value:{resources:r,isLoading:n,isError:i},children:t})},z=a.p+"static/media/logo.db253c2c.svg",W=a.p+"static/media/header-logo.f0892ea4.svg",V=z,Q=W,J="VidiCore QC Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/qc-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore QC Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore QC Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/qc-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore QC Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore QC Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore QC Theme";var Y="https://vidispine.github.io/qc-theme";Y&&Y.startsWith("http")&&(Y=(Y=new URL(Y)).pathname.replace(/(.+?)\/+$/,"$1"));var K=Y,X=a(103),Z=a.n(X),$=a(72),ee=a.n($),te=a(28),ae=a(304),re=a(305),ne=a(336),ie=a(110),ce=a(329),oe=a(324),se=a(301),le=a(319),ue=a(325),de=["queryParams","itemSearchDocument","rowsPerPage","page"],je={CHANGE_PAGE:"CHANGE_PAGE",CHANGE_ROWS:"CHANGE_ROWS",CHANGE_SORT:"CHANGE_SORT",CHANGE_SEARCHTEXT:"CHANGE_SEARCHTEXT",CHANGE_SEARCHFIELD:"CHANGE_SEARCHFIELD",CHANGE_SEARCHFIELDFACET:"CHANGE_SEARCHFIELDFACET",CHANGE_SEARCHFILTER:"CHANGE_SEARCHFILTER",CHANGE_SEARCHFILTERFACET:"CHANGE_SEARCHFILTERFACET",CHANGE_PARENT_COLLECTION:"CHANGE_PARENT_COLLECTION",CHANGE_FACET:"CHANGE_FACET",CHANGE_ITEMSEARCHDOCUMENT:"CHANGE_ITEMSEARCHDOCUMENT",CHANGE_QUERYPARAMS:"CHANGE_QUERYPARAMS",CHANGE_MATRIXPARAMS:"CHANGE_MATRIXPARAMS",CHANGE_SUGGESTION:"CHANGE_SUGGESTION"},be=function(e,t){switch(t.type){case je.CHANGE_ITEMSEARCHDOCUMENT:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:t.itemSearchDocument});case je.CHANGE_QUERYPARAMS:return Object(v.a)(Object(v.a)({},e),{},{queryParams:t.queryParams});case je.CHANGE_PAGE:return Object(v.a)(Object(v.a)({},e),{},{page:t.page,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:t.page*e.rowsPerPage+1})});case je.CHANGE_ROWS:return Object(v.a)(Object(v.a)({},e),{},{rowsPerPage:t.rowsPerPage,page:0,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1,number:t.rowsPerPage})});case je.CHANGE_SORT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,sort:t.value,itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{sort:t.field?[{field:t.field,order:t.order||"descending"}]:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SEARCHTEXT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[{value:"".concat(t.value)}]}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SEARCHFIELD:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SEARCHFIELDFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,facet:t.facet,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SEARCHFILTER:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SEARCHFILTERFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_FACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,facet:t.facet,itemSearchDocument:t.facet?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_PARENT_COLLECTION:return Object(v.a)(Object(v.a)({},e),{},{page:0,parentCollection:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:{field:[{name:"__parent_collection",value:[{value:"".concat(t.value)}]},{name:"__collection",value:[{value:"".concat(t.value)}]}],operation:"OR"}}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:void 0}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case je.CHANGE_SUGGESTION:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{suggestion:t.suggestion})});default:return e}};function he(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,a=void 0===t?{}:t,r=e.itemSearchDocument,n=void 0===r?{}:r,i=e.rowsPerPage,c=void 0===i?10:i,o=e.page,s=void 0===o?0:o,l=Object(x.a)(e,de);return Object(v.a)(Object(v.a)({},l),{},{queryParams:Object(v.a)({content:"metadata",interval:"generic",first:s*c+1,number:c},a),itemSearchDocument:Object(v.a)({intervals:"generic",filter:[]},n),rowsPerPage:c,page:s})}(e),a=n.a.useReducer(be,t),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useCallback((function(e){return c({type:je.CHANGE_SEARCHTEXT,value:e})}),[]),s=n.a.useCallback((function(e){return c({type:je.CHANGE_ITEMSEARCHDOCUMENT,itemSearchDocument:e})}),[]),l=n.a.useCallback((function(e){return c({type:je.CHANGE_ITEMQUERYPARAMS,queryParams:e})}),[]);return{state:i,onChangeRowsPerPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value;return c({type:je.CHANGE_ROWS,rowsPerPage:t})},onChangePage:function(e){var t=e.page;return c({type:je.CHANGE_PAGE,page:t})},onChangeSort:function(e,t,a){return c({type:je.CHANGE_SORT,field:t,order:a})},setSearchText:o,setSearchField:n.a.useCallback((function(e){return c({type:je.CHANGE_SEARCHFIELD,field:e})}),[]),setSearchFieldFacet:n.a.useCallback((function(e){var t=e.map((function(e){return{field:e.name,count:!0}}));c({type:je.CHANGE_SEARCHFIELDFACET,field:e,facet:t})}),[]),setSearchFilter:n.a.useCallback((function(e){return c({type:je.CHANGE_SEARCHFILTER,filter:e})}),[]),setSearchFilterFacet:n.a.useCallback((function(e){var t=e.reduce((function(e,t){var a=t.field,r=void 0===a?[]:a;return e.concat(r)}),[]).map((function(e){var t=e.name;return{name:t,field:t,count:!0,exclude:[t]}}));c({type:je.CHANGE_SEARCHFILTERFACET,filter:e,facet:t})}),[c]),setFacet:n.a.useCallback((function(e){c({type:je.CHANGE_FACET,facet:e})}),[c]),setItemSearchDocument:s,setQueryParams:l,setParentCollection:n.a.useCallback((function(e){return c({type:je.CHANGE_PARENT_COLLECTION,value:e})}),[]),setSuggestion:n.a.useCallback((function(e){c({type:je.CHANGE_SUGGESTION,suggestion:e})}),[])}}var Oe=a(19),fe=a(354),me=["test-plan","created"];function pe(e){var t=e.shape,a=void 0===t?[]:t,r=e.id,i=Object(fe.a)(a.map((function(e){var t=e.id,a=e.tag;return{queryKey:["baton",r,t],queryFn:function(){return function(e){var t=e.itemId,a=e.shapeId,r=e.tag;return w.d.getShapeBulkyMetadata({itemId:t,shapeId:a,key:"baton_report_files"}).then((function(e){var n=e.data,i=(void 0===n?{}:n).field,c=void 0===i?[]:i;if(!c.length)return!1;var o=c.reduce((function(e,t){var a=t.maps;return[].concat(Object(Oe.a)(e),Object(Oe.a)(a.map))}),[]).map((function(e){return e.entry.reduce((function(e,t){var a=t.key,r=t.value;return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},a,r))}),{})})).reduce((function(e,t){var a=t["test-plan"],r=t.created,n=Object(x.a)(t,me),i=e.findIndex((function(e){return e.name===a}));return i<0?[].concat(Object(Oe.a)(e),[{name:a,created:r,files:[Object(v.a)({},n)]}]):(e[i].files.push(Object(v.a)({},n)),e)}),[]);return{itemId:t,shapeId:a,tag:r,testplans:o}})).catch((function(){return!1}))}({itemId:r,shapeId:t,tag:a})},refetchOnWindowFocus:!1,staleTime:1/0,retry:!1}}))),c=i.some((function(e){return e.isLoading})),o=n.a.useMemo((function(){var e=i.filter((function(e){return!!e.data}));return[e.length>0,e.map((function(e){return e.data}))]}),[i]),s=Object(h.a)(o,2);return{isLoading:c,hasQc:s[0],reports:s[1]}}var ve=a(293),xe=a(334),ge=a(149),ye=["icon","button","children","size"],Ce=function(e){var t=e.icon,a=void 0===t?ve.a:t,r=e.button,i=void 0===r?xe.a:r,c=e.children,o=e.size,s=Object(x.a)(e,ye),l=n.a.useState(null),u=Object(h.a)(l,2),d=u[0],j=u[1],b=function(e){e.preventDefault(),j(null)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(i,Object(v.a)(Object(v.a)({onClick:function(e){e.preventDefault(),j(e.currentTarget)},disableRipple:!0,size:o},s),{},{children:Object(S.jsx)(a,{})})),Object(S.jsx)(ge.a,{onClick:b,anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:b,elevation:1,PaperProps:{square:!0},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:c})]})},Ae=a(152),Ee=["classes","children"];var Se=Object(f.a)((function(e){return{root:{"& > *":{overflow:"hidden"},display:"flex",width:"100%",height:"100%","& .gutter":{backgroundColor:e.palette.background.secondary,backgroundRepeat:"no-repeat",backgroundPosition:"50%"},"& .gutter.gutter-horizontal":{flexDirection:"column",cursor:"col-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==')"},"& .gutter.gutter-vertical":{flexDirection:"row",cursor:"row-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')"}}}}))((function(e){var t=e.classes,a=e.children,r=Object(x.a)(e,Ee);return Object(S.jsx)(Ae.a,Object(v.a)(Object(v.a)({},r),{},{className:t.root,children:a}))})),Te=a(35),Ie=a(295),Re=a(296),ke=function(e){var t=e.onClear,a=e.canClear;return Object(S.jsxs)(ne.a,{display:"flex",alignItems:"center",height:1,children:[a&&Object(S.jsx)(xe.a,{size:"small",disableRipple:!0,onClick:t,children:Object(S.jsx)(Ie.a,{})}),Object(S.jsx)(E.a,{style:{height:"100%",borderRadius:0},type:"submit",color:"primary",variant:"contained",disableRipple:!0,children:Object(S.jsx)(Re.a,{})})]})},Pe=function(e){var t=e.onSubmit,a=e.onChange,r=e.value,i=e.defaultValue,c=e.searchPlaceholder,o=e.classes,s=n.a.useRef(null),l=n.a.useState(Boolean(i)),u=Object(h.a)(l,2),d=u[0],j=u[1],b=function(e){a(e),j(s.current.value.length>0)};return Object(S.jsx)("form",{onSubmit:function(e){e.preventDefault(),s&&s.current&&s.current.blur();var a=(s.current||"").value;t(a),a&&j(!0)},children:Object(S.jsx)(Te.c,{fullWidth:!0,value:r,classes:o,defaultValue:i,placeholder:c,inputRef:s,onChange:function(e){return b(e.target.value)},endAdornment:Object(S.jsx)(ke,{onClear:function(){var e;j(!1),t(""),void 0===(e="")&&(s.current.value=e),b(e)},canClear:d})})})},Ne=Object(f.a)((function(e){var t=e.spacing,a=e.palette,r=e.transitions;return{root:{height:t(6),paddingLeft:t(2),borderColor:a.primary.main,borderRadius:t(.5),backgroundColor:a.background.paper,transition:r.create(["box-shadow"])},input:{paddingTop:0,paddingBottom:0},focused:{boxShadow:"inset 0 0 0 2px ".concat(a.primary.main)}}}))((function(e){var t=e.value,a=e.onSubmit,r=void 0===a?function(){return null}:a,n=e.onChange,i=e.classes,c=e.placeholder,o=void 0===c?"Search files...":c;return Object(S.jsx)(ce.a,{children:Object(S.jsx)(Pe,{value:t,classes:i,onChange:n,onSubmit:r,searchPlaceholder:o})})})),De=a(297),we=a(298),_e=a(335),He=a(337),Le=a(339),Fe=a(299),Ge=n.a.forwardRef((function(e,t){var a=e.response,r=e.classes,i=Object(d.c)().closeSnackbar,c=n.a.useMemo((function(){return a.some((function(e){return e.error}))?"Some jobs failed":"All jobs started successfully"}),[a]);return Object(S.jsx)(d.a,{ref:t,children:Object(S.jsx)(ce.a,{children:Object(S.jsx)(_e.a,{subheader:Object(S.jsxs)(He.a,{className:r.header,children:[c,Object(S.jsx)(xe.a,{onClick:i,size:"small",children:Object(S.jsx)(Ie.a,{fontSize:"small"})})]}),children:a.map((function(e){var t=e.tag,a=e.error;return Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(Le.a,{children:Object(S.jsxs)(ue.a,{children:[a&&Object(S.jsx)(De.a,{color:"error",fontSize:"small"}),!a&&Object(S.jsx)(we.a,{color:"action",fontSize:"small"})]})}),Object(S.jsx)(Fe.a,{secondaryTypographyProps:{color:"error"},primary:t,secondary:a})]},t)}))})})})})),Me=(Object(f.a)((function(){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}))(Ge),a(318)),qe=a(340),Be=a(300),Ue=a(302),ze=a(303),We=function(e){var t=e.letter,a=e.onClick;return Object(S.jsxs)(Me.a,{onClick:a,disableRipple:!0,children:[Object(S.jsx)(ue.a,{children:t}),Object(S.jsx)(Be.a,{})]})},Ve=function(e){var t=e.userName,a=e.onLogout,r=t.split(""),n=Object(h.a)(r,1)[0];return Object(S.jsxs)(Ce,{button:We,letter:n,children:[Object(S.jsxs)(qe.a,{disabled:!0,children:[Object(S.jsx)(se.a,{children:Object(S.jsx)(Ue.a,{})}),Object(S.jsx)(Fe.a,{primary:t})]}),Object(S.jsxs)(qe.a,{onClick:a,children:[Object(S.jsx)(se.a,{children:Object(S.jsx)(ze.a,{})}),Object(S.jsx)(Fe.a,{primary:"Logout"})]})]})},Qe=a(99),Je=a(100),Ye=a(153),Ke=a(150),Xe=a(341),Ze=function(e){Object(Ye.a)(a,e);var t=Object(Ke.a)(a);function a(e){var r;return Object(Qe.a)(this,a),(r=t.call(this,e)).state={hasError:!1},r}return Object(Je.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,r=t.error;return a?Object(S.jsx)(Xe.a,{maxWidth:"sm",children:Object(S.jsxs)(ce.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(S.jsx)("h3",{children:"We're sorry - something went wrong: "}),r&&Object(S.jsx)("div",{style:{color:"#e57373"},children:r.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(n.a.Component),$e=function(e){var t=e.metadata,a=void 0===t?{}:t,r=e.shape;r=void 0===r?[{}]:r;var n=Object(h.a)(r,1)[0];return Object(v.a)(Object(v.a)(Object(v.a)({},Object(te.f)(a,{flat:!0,arrayOnSingle:!1})),Object(te.g)(n)),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).containerComponent,t=(void 0===e?{}:e).file,a=void 0===t?[{}]:t,r=Object(h.a)(a,1)[0],n=r.timestamp,i=r.id,c=r.storage;return{timestamp:ee()(n).format("L"),fileId:i,storageId:c}}(n))},et=function(e){var t=e.fields,a=e.data;return Object(S.jsx)(ne.a,{display:"grid",gridTemplateColumns:"auto 1fr",gap:1,children:t.map((function(e){var t=e.key,r=e.label;return Object(S.jsxs)(ne.a,{display:"contents",children:[Object(S.jsxs)(ie.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(S.jsx)(ie.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:Z()(a,t,"-")})]},t)}))})},tt=[[{key:"title",label:"Title"},{key:"itemId",label:"ID"},{key:"fileSize",label:"Filesize"}],[{key:"duration",label:"Duration"},{key:"timestamp",label:"Timestamp"},{key:"dimension",label:"Resolution"},{key:"frameRate",label:"Framerate"}],[{key:"videoCodec",label:"Video codec"},{key:"videoBitrate",label:"Bitrate"},{key:"audioCodec",label:"Audio codec"},{key:"audioChannels",label:"Audio channels"}]],at=Object(f.a)((function(e){var t=e.spacing,a=e.typography;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto auto 1fr 1fr 1fr auto",gap:t(2),alignItems:"start","& > .MuiAvatar-root":{display:"flex",flexDirection:"column",fontSize:a.fontSize},"& > .MuiListItemIcon-root":{minWidth:"unset",marginLeft:t(-1),marginTop:t(-1)},"&:not(:last-child)":{marginBottom:t(2)},"& > *:first-child:not(.MuiListItemIcon-root)":{gridColumn:"1 / 2 span"},"& > *:last-child:nth-child(4)":{gridColumn:"5 / 2 span"}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.onQc,a=void 0===t?function(){return null}:t,r=e.onDelete,i=void 0===r?function(){return null}:r,c=e.classes,s=e.itemType,l=void 0===s?{}:s,u=e.checkbox,d=void 0!==u&&u,j=e.interactive,b=void 0===j||j,O=pe(l),f=O.hasQc,m=(O.reports,l.thumbnails),p=(m=void 0===m?{}:m).uri,v=void 0===p?[]:p,x=Object(h.a)(v,1)[0],g=n.a.useMemo((function(){return $e(l)}),[l]);return Object(S.jsx)(ce.a,{className:c.paper,children:Object(S.jsxs)(oe.a,{button:!0,disableRipple:!0,className:c.root,children:[b&&d&&Object(S.jsx)(se.a,{children:Object(S.jsx)(le.a,{})}),Object(S.jsx)(ue.a,{variant:"square",src:x,children:!x&&Object(S.jsx)(ae.a,{})}),tt.map((function(e){return Object(S.jsx)(et,{data:g,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),b&&Object(S.jsxs)(ne.a,{height:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between",children:[Object(S.jsx)(E.a,{disableElevation:!0,size:"small",variant:"contained",color:"primary",startIcon:Object(S.jsx)(re.a,{}),onClick:function(e){e.preventDefault(),a(l)},children:"Start QC"}),Object(S.jsx)(E.a,{disabled:!f,component:o.b,size:"small",variant:"text",color:"inherit",to:"/search/".concat(g.itemId),children:"View report"}),Object(S.jsx)(E.a,{size:"small",variant:"text",color:"inherit",onClick:function(){return i(g.itemId)},children:"Delete item"})]})]})})})),rt=a(338),nt=a(342),it=Object(f.a)((function(e){return{paper:{"&:not(:last-child)":{marginBottom:(0,e.spacing)(1)}}}}))((function(e){var t=e.entity,a=e.preset,r=e.onClick,i=e.selected,c=void 0===i?[]:i,o=e.classes,s=e.resourceId,l=t.itemId,u=t.shapeId,d=function(e){var t=e.preset,a=e.itemId,r=e.shapeId,n=e.resourceId;return Object(D.a)(["preset",t,a,r],(function(){return new Promise((function(e,i){w.p.createShapeAnalyze({itemId:a,shapeId:r,queryParams:{resourceId:n,preset:t},costEstimate:!0,analyzeJobDocument:{}}).then((function(t){var a=t.data,r=(a=void 0===a?{}:a).id;!function t(){return w.t.getCostEstimate({costEstimateId:r}).then((function(a){var r=a.data,n=r.state,i=r.service,c=void 0===i?[{}]:i;if("FINISHED"!==n)setTimeout(t,1e3);else{var o=Object(h.a)(c,1)[0].cost,s=(o=void 0===o?{}:o).value;e(void 0===s?0:s)}})).catch(i)}()})).catch(i)}))}),{refetchOnWindowFocus:!1,staleTime:1/0,retry:!1})}({preset:a,itemId:l,shapeId:u,resourceId:s}),j=d.data,b=void 0===j?{}:j,O=d.isLoading,f=d.isError,m=n.a.useMemo((function(){return c.includes(a)}),[c,a]);return Object(S.jsx)(ce.a,{className:o.paper,children:Object(S.jsxs)(oe.a,{disabled:O,onClick:function(){return r(a)},disableRipple:!0,className:o.root,button:!0,ContainerComponent:"div",children:[Object(S.jsx)(se.a,{children:Object(S.jsx)(le.a,{edge:"start",checked:m,color:"primary"})}),Object(S.jsx)(Fe.a,{primary:a}),Object(S.jsxs)(rt.a,{children:[O&&Object(S.jsx)(nt.a,{size:20}),!f&&!O&&Object(S.jsxs)("span",{children:["$",b]})]})]})})})),ct=function(e){var t=e.entity,a=e.selected,r=e.setSelected,i=e.resourceId,c=function(){var e=n.a.useContext(_);if(void 0===e)throw new Error("usePreset must be used within a PresetProvider");return e}(),o=c.presets,s=c.onSearch,l=function(e){a.includes(e)?r([]):r([e])};return Object(S.jsxs)(ne.a,{overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column",children:[Object(S.jsx)(ne.a,{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:10,bgcolor:"background.default",children:Object(S.jsx)(Ne,{onChange:s,placeholder:"Search profiles..."})}),Object(S.jsx)(ne.a,{mt:1,children:o.map((function(e){return Object(S.jsx)(it,{entity:t,preset:e,onClick:l,selected:a,resourceId:i},e)}))})]})},ot=function(e){var t=e.open,a=e.onSuccess,r=e.onError,i=e.onClose,c=e.item,o=void 0===c?{}:c,s=function(e){var t=e.type,a=n.a.useContext(q);if(t){var r=a.resources.find((function(e){return e.type===t}));a=Object(v.a)(Object(v.a)({},a),{},{resource:r})}return a}({type:"BATON"}).resource,l=n.a.useState([]),u=Object(h.a)(l,2),d=u[0],j=u[1],b=n.a.useMemo((function(){return s&&s.id}),[s]),O=n.a.useMemo((function(){var e=o.shape,t=void 0===e?[]:e;return{itemId:o.id,shapeId:(t.find((function(e){var t=e.tag;return(void 0===t?[]:t).includes("original")}))||{}).id}}),[o]);return Object(S.jsxs)(g.a,{open:t,onClose:i,maxWidth:"lg",fullWidth:!0,children:[Object(S.jsxs)(y.a,{disableTypography:!0,sx:{display:"flex",flexDirection:"column"},children:[Object(S.jsx)(ie.a,{variant:"h6",gutterBottom:!0,children:"Start QC"}),Object(S.jsx)(ie.a,{variant:"caption",children:"Choose a preset to start the QC job"})]}),Object(S.jsxs)(C.a,{dividers:!0,sx:{padding:1},children:[Object(S.jsx)(at,{itemType:o,interactive:!1}),Object(S.jsx)(ct,{entity:O,resourceId:b,selected:d,setSelected:j})]}),Object(S.jsxs)(A.a,{children:[Object(S.jsx)(E.a,{onClick:i,children:"Close"}),Object(S.jsx)(E.a,{variant:"contained",color:"primary",disabled:!d.length,onClick:function(){var e=O.itemId,t=O.shapeId,n={preset:Object(h.a)(d,1)[0],resourceId:b};return w.p.createShapeAnalyze({itemId:e,shapeId:t,queryParams:n}).then(a).catch(r)},children:"Start QC"})]})]})},st=function(e){var t=e.itemListType,a=void 0===t?{}:t,r=e.page,n=e.onChangePage,i=a.item,c=void 0===i?[]:i,o=a.hits,s=N().showDialog,l=Object(d.c)().enqueueSnackbar,u=function(e){return s({title:"Delete item",message:"Are you sure you want to delete this item?",okText:"Yes, delete item",noText:"No, cancel"}).then((function(){return w.h.removeItem({itemId:e}).then((function(){return l("Item deleted")})).catch((function(){return l("Failed to delete item",{variant:"error"})}))})).catch((function(){return null}))},j=function(e){return s({Dialog:ot,item:e}).then((function(){return l("QC Job started!")})).catch((function(e){var t=e.message;return t&&l(t,{variant:"error"})}))};return Object(S.jsxs)(ne.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(S.jsx)(ne.a,{overflow:"auto",height:1,children:Object(S.jsx)(_e.a,{disablePadding:!0,children:c.map((function(e){return Object(S.jsx)(at,{itemType:e,allowQc:!0,onQc:j,onDelete:u},e.id)}))})}),Object(S.jsxs)(ne.a,{display:"flex",justifyContent:"flex-end",children:[Object(S.jsx)(E.a,{disabled:r<1,onClick:function(){return n({page:r-1})},children:"Prev"}),Object(S.jsx)(E.a,{disabled:10*(r+1)>o,onClick:function(){return n({page:r+1})},children:"Next"})]})]})},lt=a(142),ut=a.n(lt),dt=a(316),jt=a(344),bt=a(306),ht=a(307),Ot=a(308),ft=a(343),mt="READY",pt="STARTED",vt="VIDINET_JOB",xt="FINISHED",gt="FINISHED_WARNING",yt="WAITING",Ct="ABORTED_PENDING",At="ABORTED",Et="FAILED_TOTAL",St=[mt,pt,vt,yt,Ct],Tt=[xt,gt,Et,At],It=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,r=e.label;return Object(S.jsxs)(ne.a,{display:"contents",children:[Object(S.jsxs)(ie.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(S.jsx)(ie.a,{variant:"body2",color:"textPrimary",children:Z()(a,t,"-")})]},t)}))},Rt=[{key:"type",label:"Job type"},{key:"jobId",label:"Job ID"}],kt=Object(f.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),padding:t(1,0),display:"flex",flexDirection:"column",alignItems:"stretch","&:not(:last-child)":{marginBottom:t(2)}},top:{padding:t(1,2),display:"grid",alignItems:"start",gridTemplateColumns:"auto 1fr auto",gap:t(2),"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:t(0,2)}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.jobType,a=void 0===t?{}:t,r=e.classes,i=e.onAbort,c=n.a.useState(a),o=Object(h.a)(c,1)[0],s=o.status,l=o.started,u=o.jobId,d=function(e){var t=e.jobId,a=e.type,r=e.status,i=n.a.useState(0),c=Object(h.a)(i,2),o=c[0],s=c[1];return{request:n.a.useCallback((function(){Tt.includes(r)?s(100):function e(){return w.i.getJob({jobId:t}).then((function(t){var r=t.data,n=(r=void 0===r?{}:r).status,i=r.log,c=100;"TRANSCODE"===a&&(c=200);var o=((void 0===i?{}:i).task.find((function(e){return e.step===c}))||{}).progress;s((void 0===o?{}:o).value||0),St.includes(n)&&setTimeout((function(){return e()}),2500)}))}()}),[t,a,r]),value:o}}(a),j=d.request,b=d.value,O=void 0===b?100:b;return n.a.useEffect(j,[j]),Object(S.jsx)(ce.a,{className:r.paper,children:Object(S.jsxs)(oe.a,{className:r.root,children:[Object(S.jsxs)(ne.a,{className:r.top,children:[Object(S.jsx)(ue.a,{variant:"square",children:"J"}),Object(S.jsx)(ne.a,{children:Object(S.jsx)(It,{data:a,fields:Rt})}),Object(S.jsxs)(xe.a,{size:"small",onClick:function(){return St.includes(s)&&i(u)},children:[St.includes(s)&&Object(S.jsx)(bt.a,{}),Tt.includes(s)&&Object(S.jsx)(ht.a,{})]})]}),Object(S.jsx)(Ot.a,{}),Object(S.jsxs)(ne.a,{children:[Object(S.jsxs)(ne.a,{py:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(S.jsx)(ie.a,{color:"textPrimary",variant:"button",children:s}),Object(S.jsx)(ie.a,{color:"textSecondary",variant:"caption",children:ee()(l).fromNow()})]}),Object(S.jsx)(ft.a,{variant:St.includes(s)&&!O?"query":"determinate",value:O})]})]})})})),Pt={step:!0,type:"RAW_IMPORT,PLACEHOLDER_IMPORT,ANALYZE",sort:"startTime desc",number:10},Nt=function(e){var t=e.jobListType,a=e.page,r=e.isLoading,n=e.onAbort,i=void 0===n?function(){return null}:n,c=e.setPage,o=t.job,s=void 0===o?[]:o,l=t.hits,u=void 0===l?0:l;return Object(S.jsxs)(ne.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(S.jsx)(ne.a,{overflow:"auto",height:1,children:Object(S.jsxs)(_e.a,{disablePadding:!0,children:[s.map((function(e){return Object(S.jsx)(kt,{jobType:e,onAbort:i},e.jobId)})),!r&&s.length<1&&Object(S.jsx)("span",{children:"No jobs found"})]})}),Object(S.jsxs)(ne.a,{display:"flex",justifyContent:"flex-end",children:[Object(S.jsx)(E.a,{disabled:!a,onClick:function(){return c(a-1)},children:"Prev"}),Object(S.jsx)(E.a,{disabled:10*(a+1)>u,onClick:function(){return c(a+1)},children:"Next"})]})]})},Dt=function(){var e=N().showDialog,t=Object(d.c)().enqueueSnackbar,a=n.a.useState("active"),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useState(0),s=Object(h.a)(o,2),l=s[0],u=s[1],j=Object(m.c)(w.i.listJob),b=j.request,O=j.data,f=void 0===O?{}:O,p=j.isLoading,x=n.a.useCallback((function(){var e=Object(v.a)(Object(v.a)({},Pt),{},{state:St,first:10*l+1});b({queryParams:e})}),[l]),g=Object(m.c)(w.i.listJob),y=g.request,C=g.data,A=void 0===C?{}:C,E=g.isLoading,T=n.a.useCallback((function(){var e=Object(v.a)(Object(v.a)({},Pt),{},{state:Tt,first:10*l+1});y({queryParams:e})}),[l]);n.a.useEffect((function(){x(),T();var e=setInterval((function(){x(),T()}),15e3);return function(){return clearInterval(e)}}),[l,i]);var I=p||E;return Object(S.jsxs)(ne.a,{display:"grid",gridTemplateRows:"auto 1fr",gap:2,children:[Object(S.jsx)(ce.a,{children:Object(S.jsxs)(dt.a,{value:i,onChange:function(e,t){u(0),c(t)},children:[Object(S.jsx)(jt.a,{disableRipple:!0,value:"active",label:"Active jobs (".concat(f.hits||0,")")}),Object(S.jsx)(jt.a,{disableRipple:!0,value:"finished",label:"Finished jobs (".concat(A.hits||0,")")}),I&&Object(S.jsx)(jt.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(S.jsx)(nt.a,{size:20})})]})}),Object(S.jsx)(ne.a,{overflow:"hidden",hidden:"active"!==i,children:Object(S.jsx)(Nt,{jobListType:f,page:l,setPage:u,isLoading:I,onAbort:function(a){return e({message:"Are you sure you want to abort this job?",okText:"Yes, abort job",noText:"No, cancel"}).then((function(){return w.i.abortJob({jobId:a})})).then((function(){return t("Job aborted!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))}})}),Object(S.jsx)(ne.a,{overflow:"hidden",hidden:"finished"!==i,children:Object(S.jsx)(Nt,{jobListType:A,page:l,setPage:u,isLoading:I})})]})},wt=["state"],_t={itemSearchDocument:{},queryParams:{content:["shape","metadata","thumbnail"],field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"}],"noauth-url":!0},rowsPerPage:10},Ht=function(){var e=n.a.useState(""),t=Object(h.a)(e,2),a=t[0],r=t[1],i=function(){var e=n.a.useContext(F);if(void 0===e)throw new Error("useSplitters must be used within a SplitterContext");return e}(),c=i.splitters,o=i.setSplitter,s=he(_t),l=s.state,u=Object(x.a)(s,wt),d=Object(m.e)(l),j=d.itemListType,b=void 0===j?{}:j,O=d.isLoading,f=d.isError,p=d.onRefresh,g=l.page,y=n.a.useRef(ut()(u.setSearchText,500)).current;return n.a.useEffect((function(){return f&&setTimeout(p,5e3)}),[f]),n.a.useEffect((function(){return y("*".concat(a.toLowerCase(),"*"))}),[a]),Object(S.jsxs)(ne.a,{height:1,display:"flex",flexDirection:"column",children:[Object(S.jsx)(Ne,{onChange:r,value:a}),Object(S.jsx)(ne.a,{mt:2,flexGrow:1,overflow:"hidden",children:Object(S.jsxs)(Se,{style:{flexDirection:"row"},direction:"horizontal",minSize:375,sizes:c.vertical,gutterSize:20,onDragEnd:function(e){return o("horizontal",e)},children:[Object(S.jsxs)(ne.a,{display:"grid",gridTemplateRows:"auto 1fr",gap:2,children:[Object(S.jsx)(ce.a,{children:Object(S.jsxs)(dt.a,{value:"input",children:[Object(S.jsx)(jt.a,{disableRipple:!0,value:"input",label:"Files (".concat(b.hits||0,")")}),O&&Object(S.jsx)(jt.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(S.jsx)(nt.a,{size:20})})]})}),Object(S.jsxs)(ne.a,{overflow:"hidden",children:[Object(S.jsx)(st,Object(v.a)({page:g,itemListType:b},u)),","]})]}),Object(S.jsx)(Dt,{})]})})]})},Lt=a(326),Ft=a(321),Gt=a(317),Mt=a(88),qt=a(345),Bt=a(315),Ut=a(346),zt=["name","onChange","value"],Wt=["input","meta","helperText","classes","className","FormControlProps"],Vt=Object(f.a)((function(e){return{root:{marginTop:(0,e.spacing)(1),width:"100%","& .MuiInputBase-root":{fontSize:".75rem"},"& .MuiInputBase-input":{fontWeight:500,fontSize:"0.875rem"}},text:{}}}))((function(e){var t=e.input,a=(t=void 0===t?{}:t).name,r=t.onChange,n=t.value,i=Object(x.a)(t,zt),c=e.meta,o=(c=void 0===c?{}:c).touched,s=c.error,l=c.submitError,u=e.helperText,d=void 0===u?"\xa0":u,j=e.classes,b=(e.className,e.FormControlProps),h=void 0===b?{}:b,O=Object(x.a)(e,Wt);return Object(S.jsx)(qt.a,Object(v.a)(Object(v.a)({classes:{root:j.root}},h),{},{children:Object(S.jsx)(Bt.a,Object(v.a)({classes:{root:j.text},name:a,helperText:o&&(s||l)?s||l:d,error:(s||l)&&o,inputProps:i,onChange:r,value:n},O))}))})),Qt=function(e){var t=e.submitting,a=e.children;return Object(S.jsx)(E.a,{type:"submit",disabled:t,children:Object(S.jsxs)(ne.a,{position:"relative",children:[Object(S.jsx)(ne.a,{position:"absolute",height:1,width:1,display:t?"inherit":"none",children:Object(S.jsx)(nt.a,{size:24})}),Object(S.jsx)(ne.a,{children:a})]})})},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,r=new RegExp(a),n=e.match(r);return n?null:t},Yt=function(e){var t=e.onSubmit,a=void 0===t?function(){return null}:t,r=e.helperText,n=e.initialValues;return Object(S.jsx)(Mt.b,{onSubmit:a,initialValues:n,subscription:{submitting:!0,submitError:!0},render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.submitError;return Object(S.jsxs)("form",{onSubmit:t,children:[Object(S.jsxs)(ne.a,{children:[Object(S.jsx)(Mt.a,{name:"serverUrl",component:Vt,type:"text",label:"Vidispine API Server",validate:Jt,variant:"standard",fullWidth:!0}),Object(S.jsx)(Mt.a,{name:"userName",component:Vt,type:"text",label:"Username",validate:function(e){return e?void 0:"Required"},variant:"standard",fullWidth:!0}),Object(S.jsx)(Mt.a,{name:"password",component:Vt,type:"password",label:"Password",validate:function(e){return e?void 0:"Required"},variant:"standard",fullWidth:!0})]}),Object(S.jsx)(ne.a,{py:r||n?0:.8,my:1,children:n&&Object(S.jsx)(Ut.a,{error:!0,children:n})}),Object(S.jsx)(ne.a,{children:Object(S.jsx)(Qt,{type:"submit",submitting:a,fullWidth:!0,children:"Login"})})]})}})};var Kt=Object(f.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,r=e.userName,n=e.serverUrl,i=e.error;return Object(S.jsxs)(Lt.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(S.jsxs)(Lt.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(S.jsx)(Gt.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(S.jsx)(Yt,{onSubmit:a,initialValues:{userName:r,serverUrl:n}})]}),Object(S.jsx)(Ft.a,{mdDown:!0,children:Object(S.jsx)(Lt.a,{item:!0,sm:!0,className:t.gridRight,children:Object(S.jsx)("img",{src:V,alt:J,className:t.logo})})})]})}));var Xt=Object(f.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(S.jsx)(ie.a,{className:t.text,children:"Page does not exist"})})),Zt=a(349),$t=a(350),ea=a(348),ta=a(347),aa=a(351),ra=a(143),na=a(309),ia={xml:{extension:"xml",type:"code",color:"#3478C7",glyphColor:"#fff"},pdf:{extension:"pdf",type:"acrobat",color:"#D93831",glyphColor:"#fff"}},ca=function(e){var t=e.files,a=e.onDownload;return Object(S.jsx)(ta.a,{padding:"checkbox",children:Object(S.jsx)(ne.a,{display:"flex",children:t.map((function(e){var t=e.filename,r=e.type;return Object(S.jsx)(xe.a,{onClick:function(){return a({filename:t})},sx:{width:64,height:64,padding:2},children:Object(S.jsx)(ra.a,Object(v.a)({},ia[r]))},t)}))})})},oa=function(e){var t=e.date;return Object(S.jsx)(ta.a,{children:ee()(t).format("LLL")})},sa=function(e){var t=e.onHighlight;return Object(S.jsx)(ta.a,{padding:"checkbox",children:Object(S.jsx)(Ce,{children:Object(S.jsxs)(qe.a,{onClick:t,children:[Object(S.jsx)(se.a,{children:Object(S.jsx)(na.a,{})}),Object(S.jsx)(Fe.a,{primary:"Show on timeline",secondary:"Display events on player timeline"})]})})})},la=function(e){var t=e.data,a=e.padding,r=e.value,i=e.type,c=e.onDownload,o=e.onHighlight,s=n.a.useMemo((function(){return t[r]||"-"}),[t,r]);return"menu"===i?Object(S.jsx)(sa,{onHighlight:o}):t[r]?"files"===i?Object(S.jsx)(ca,{files:s,onDownload:c}):"date"===i?Object(S.jsx)(oa,{date:s,value:r}):Object(S.jsx)(ta.a,{sx:Object(v.a)({},["info","error","warning"].includes(r)&&{color:"".concat(r,".main")}),padding:a,children:s}):Object(S.jsx)(ta.a,{})},ua=function(e){var t=e.testplan,a=e.itemId,r=e.shapeId,i=e.columns,c=e.onHighlight,o=t.name,s=function(e){var t=e.filename;return w.d.getShapeBulkyMetadata({itemId:a,shapeId:r,key:"baton_report_files/as-file",queryParams:{extraMapValues:"filename=".concat(t)},responseType:"blob",headers:{accept:"application/octet-stream"}}).then((function(e){var t=e.data;return URL.createObjectURL(t)})).then((function(e){return Object.assign(document.createElement("a"),{href:e,download:t}).click()}))},l=Object(m.c)(w.d.getShapeBulkyMetadata),u=l.request,d=l.data,j=void 0===d?{}:d;n.a.useEffect((function(){u({itemId:a,shapeId:r,key:"baton_summary_".concat(t.name)})}),[a,u,r,t]);var b=n.a.useMemo((function(){return function(e,t){var a=e.field,r=void 0===a?[]:a;return Object(v.a)(Object(v.a)({},t),r.length&&Object(v.a)({},r.reduce((function(e,t){var a=t.maps,r=(void 0===a?{}:a).map,n=void 0===r?[]:r;return n.length?n.reduce((function(e,t){var a=t.entry,r=void 0===a?[]:a;return r.length?r.reduce((function(e,t){var a=t.key,r=t.value;if(!a||!r)return e;var n=a.slice(0,-1);return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},n,r))}),{}):e}),{}):e}),{})))}(j,t)}),[j,t]);return Object(S.jsx)(ea.a,{children:i.map((function(e){var t=e.id,n=e.value,i=e.label,l=e.padding,u=e.type;return Object(S.jsx)(la,{type:u,data:b,value:n,label:i,padding:l,onHighlight:function(){return c({testplan:o,shapeId:r,itemId:a})},onDownload:s},t)}))})},da=[{id:1,label:"Reports",type:"files",value:"files",padding:"checkbox"},{id:3,label:"Testplan",value:"name"},{id:4,label:"Date",value:"created",type:"date"},{id:5,label:"Errors",value:"error"},{id:6,label:"Warnings",value:"warning"},{id:7,label:"Info",value:"info"},{id:8,label:void 0,value:void 0,type:"menu"}],ja=function(e){var t=e.itemType,a=e.isLoading,r=e.columns,n=void 0===r?da:r,i=e.onHighlight,c=pe(t).reports;return a?null:c.map((function(e){var t=e.itemId,a=e.shapeId,r=e.tag,c=e.testplans;return Object(S.jsxs)(ne.a,{children:[Object(S.jsx)(ie.a,{variant:"h6",children:"".concat(r," [").concat(a,"]")}),Object(S.jsxs)(Zt.a,{children:[Object(S.jsx)("caption",{children:"Found ".concat(c.length," report").concat(1!==c.length?"s":"")}),Object(S.jsx)($t.a,{children:Object(S.jsx)(ea.a,{children:n.map((function(e){var t=e.label,a=e.id,r=e.padding;return Object(S.jsx)(ta.a,{padding:r,children:t},a)}))})}),Object(S.jsx)(aa.a,{children:c.map((function(e){return Object(S.jsx)(ua,{columns:n,shapeId:a,itemId:t,testplan:e,onHighlight:i},e.name)}))})]})]},a)}))},ba=a(145),ha=(a(229),function(e){var t=e.itemType,a=e.isLoading,r=e.playerRef,i=n.a.useMemo((function(){return Object(te.b)(t,{allowedMimeTypes:["video/mp4"]})}),[t]);return a?null:Object(S.jsx)(ba.a,{controls:!0,sources:i,ref:r,timecode:!0})}),Oa=a(313),fa=function(e){switch(e.toLowerCase()){case"fatal":case"serious":return"error.main";case"warning":return"warning.main";case"info":return"info.main";default:return"text.secondary"}},ma=function(e){var t=e.entry,a=e.offset,r=e.onClick,n=e.children,i=t.startTimecode,c=t.endTimecode,o=t.synopsis,s=t.severity,l=t.description,u=(i-a).toFixed(2),d=(c-a).toFixed(2);return Object(S.jsx)(Oa.a,{title:Object(S.jsx)(ne.a,{sx:{maxHeight:500,paddingRight:0,overflow:"auto","&::WebkitScrollbar":{WebkitAppearance:"none",width:8},"&::WebkitScrollbarThumb":{borderRadius:1,backgroundColor:"divider"}},children:Object(S.jsx)(ne.a,{sx:{cursor:"pointer"},onClick:function(){return r(u)},children:Object(S.jsxs)(Lt.a,{container:!0,children:[Object(S.jsxs)(Lt.a,{item:!0,container:!0,xs:3,direction:"column",children:[Object(S.jsx)(ie.a,{variant:"subtitle2",color:fa(s),children:s}),Object(S.jsx)(ie.a,{variant:"caption",children:Object(te.c)(u).toSmpte()}),Object(S.jsx)(ie.a,{variant:"caption",children:Object(te.c)(d).toSmpte()})]}),Object(S.jsxs)(Lt.a,{item:!0,container:!0,xs:9,direction:"column",children:[Object(S.jsx)(ie.a,{variant:"subtitle2",children:o}),Object(S.jsx)(ie.a,{variant:"caption",children:l})]})]})})}),children:n})},pa=function(e){switch(e.toLowerCase()){case"fatal":case"serious":return"error.main";case"warning":return"warning.main";case"info":return"info.main";default:return"text.secondary"}},va=function(e){var t=e.markers,a=e.duration,r=e.offset,i=e.onSeek,c=void 0===i?function(){return null}:i,o=n.a.useMemo((function(){var e=a/100;return t.reduce((function(t,a){var r,n=a.startTimecode,i=a.endTimecode;return Object.entries(t).forEach((function(t){var a=Object(h.a)(t,2),c=a[0],o=a[1];(o.length||(r=c),void 0===r)&&(o.every((function(t){var a=t.startTimecode,r=t.endTimecode,c=(n-a+i-r)/2;return!(c<e&&c>0-e)&&(!(a<n&&r>i)&&(!(a<n&&r>n)&&!(r>n&&r<i)))}))&&(r=c))})),void 0===r?Object(v.a)(Object(v.a)({},t),{},Object(L.a)({},Object.keys(t).length,[a])):Object(v.a)(Object(v.a)({},t),{},Object(L.a)({},r,(t[r]||[]).concat([a])))}),{0:[]})}),[t,a]);return Object(S.jsx)(ne.a,{sx:{width:1,borderRadius:1,overflow:"hidden"},children:Object.entries(o).map((function(e){var t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(S.jsx)(ne.a,{sx:{height:10,backgroundColor:"background.default",position:"relative",":not(:first-of-type)":{marginTop:"2px"}},children:i.map((function(e){var t=e.startTimecode,n=e.endTimecode,i=e.severity,o=t/a*100,s=(n-t)/a*100,l=function(){return c(t)};return Object(S.jsx)(ma,{entry:e,offset:r,onClick:l,children:Object(S.jsx)(ne.a,{onClick:l,sx:{cursor:"pointer",borderRadius:1,backgroundColor:pa(i),position:"absolute",left:"".concat(o,"%"),width:"".concat(s>1?s:1,"%"),height:10}})},t)}))},n)}))})},xa=["maps","start","end"],ga=function(e){var t=e.videoEl,a=function(e){var t=e.itemId,a=e.shapeId,r=e.testplan,i=Object(m.c)(w.p.getShape),c=i.request,o=i.data,s=void 0===o?{}:o;n.a.useEffect((function(){t&&a&&c({itemId:t,shapeId:a})}),[t,a,c]);var l=n.a.useMemo((function(){var e=s.containerComponent,t=(e=void 0===e?{}:e).duration,a=void 0===t?{}:t;return Object(te.e)(a).toSeconds()}),[s]),u=n.a.useMemo((function(){var e=s.containerComponent,t=void 0===e?{}:e,a=t.timeCodeTimeBase,r=void 0===a?{}:a,n=t.startTimecode,i=void 0===n?0:n,c=t.dropFrame,o=void 0!==c&&c;return Object(te.e)({samples:i,timeBase:r},{dropFrame:o}).toSeconds()}),[s]),d=Object(m.c)(w.d.getShapeBulkyMetadata),j=d.request,b=d.data,h=void 0===b?{}:b;n.a.useEffect((function(){r&&a&&t&&j({itemId:t,shapeId:a,key:"baton_error_".concat(r)})}),[t,a,r,j]);var O=n.a.useMemo((function(){var e=h.field;return(void 0===e?[]:e).filter((function(e){var t=e.start,a=e.end;return"-INF"!==t&&"+INF"!==a})).reduce((function(e,t){var a=t.maps,r=void 0===a?{}:a,n=t.start,i=t.end,c=Object(x.a)(t,xa),o=Object(te.d)(n).toSeconds()-u,s=Object(te.d)(i).toSeconds()-u,l=r.map,d=(void 0===l?[]:l).reduce((function(e,t){var a=t.entry,r=(void 0===a?[]:a).reduce((function(e,t){var a=t.key,r=t.value;return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},a,r))}),{});return[].concat(Object(Oe.a)(e),[Object(v.a)(Object(v.a)(Object(v.a)({},r),c),{},{startTimecode:o,endTimecode:s})])}),[]);return[].concat(Object(Oe.a)(e),Object(Oe.a)(d))}),[]).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},t.item,(e[t.item]||[]).concat(t)))}),{})}),[h,u]);return{duration:l,startOfMedia:u,events:O}}(e.highlight),r=a.duration,i=a.startOfMedia,c=a.events,o=n.a.useCallback((function(e){t.current.player.videoEl.currentTime=e}),[t]);return Object.keys(c).length?Object(S.jsxs)(ne.a,{sx:{backgroundColor:"background.paper",padding:1,paddingBottom:2,marginTop:1,borderRadius:1},children:[Object(S.jsx)(ie.a,{variant:"subtitle1",children:"Baton report timeline"}),Object.entries(c).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return Object(S.jsxs)(ne.a,{children:[Object(S.jsx)(Ot.a,{textAlign:"left",children:Object(S.jsx)(ie.a,{variant:"caption",children:a})}),Object(S.jsx)(va,{onSeek:o,markers:n,duration:r,offset:i})]},a)}))]}):null},ya={content:["thumbnail","shape"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"}],"noauth-url":!0,sampleRate:"PAL"},Ca={p:["shape.id","shape.tag","id"]},Aa=function(){var e=Object(O.g)().itemId,t=n.a.createRef(),a=n.a.useState({itemId:e}),r=Object(h.a)(a,2),i=r[0],c=r[1];return Object(S.jsxs)(Lt.a,{container:!0,spacing:2,children:[Object(S.jsxs)(Lt.a,{item:!0,xs:6,children:[Object(S.jsx)(m.b,{itemId:e,queryParams:ya,children:Object(S.jsx)(ha,{playerRef:t})}),Object(S.jsx)(ga,{highlight:i,videoEl:t})]}),Object(S.jsx)(Lt.a,{item:!0,xs:6,children:Object(S.jsx)(m.b,{itemId:e,queryParams:Ca,children:Object(S.jsx)(ja,{onHighlight:c})})})]})},Ea=a(151),Sa=a(147),Ta=a.n(Sa),Ia=a(310),Ra=function(e){var t,a=e.preview,r=e.type,n=e.path;return t=r.includes("image")?"image":r.includes("video")?"video":"other",Object(S.jsxs)(ne.a,{sx:{display:"flex",overflow:"hidden",height:"100%",justifyContent:"center"},children:["image"===t&&Object(S.jsx)("img",{src:a,alt:n}),"video"===t&&Object(S.jsx)("video",{muted:!0,children:Object(S.jsx)("source",{src:a,type:r})}),"other"===t&&Object(S.jsx)(ue.a,{sx:{alignSelf:"center"},variant:"square",children:Object(S.jsx)(ae.a,{fontSize:"large"})})]})},ka=function(e){var t=e.value;return Object(S.jsxs)(ne.a,{display:"flex",alignItems:"center",children:[Object(S.jsx)(ne.a,{width:"100%",mr:1,children:Object(S.jsx)(ft.a,{variant:"determinate",value:t})}),Object(S.jsx)(ne.a,{minWidth:35,children:t&&Object(S.jsx)(ie.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(t),"%")})})]})},Pa=function(e){var t=e.file,a=t.type,r=t.preview,n=t.path,i=t.size,c=e.progress,o=e.onDelete,s=e.isUploading,l=function(e){if(!e)return 0;var t=e.transferedBytes,a=e.totalBytes;return t&&a?Math.floor(e.transferedBytes/e.totalBytes*100):0}(c),u=100===l;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(oe.a,{secondaryAction:Object(S.jsxs)(xe.a,{disabled:s,edge:"end",onClick:o,children:[u&&Object(S.jsx)(Ia.a,{}),!u&&Object(S.jsx)(bt.a,{})]}),children:[Object(S.jsx)(Le.a,{sx:{marginRight:2,width:60,height:60},children:Object(S.jsx)(Ra,{preview:r,type:a,path:n})}),Object(S.jsx)(Fe.a,{primary:n,secondary:Ta()(i)})]}),c&&Object(S.jsx)(ka,{value:l})]})},Na=function(e){var t=e.responseTimeout,a=void 0===t?5e3:t,r=e.DragActiveText,i=void 0===r?"Drop files here":r,c=e.DragInactiveText,o=void 0===c?"Drop files or click to open":c,s=Object(d.c)().enqueueSnackbar,l=n.a.useCallback((function(){return s("Import started",{variant:"success"})}),[s]),u=Object(m.f)({}),j=u.onAddFiles,b=u.onUpload,O=u.onRemoveFile,f=u.files,p=n.a.useState(!1),x=Object(h.a)(p,2),g=x[0],y=x[1],C=f.filter((function(e){return!e.progress})),A=f.filter((function(e){return e.progress})),T=Object(Ea.a)({onDrop:function(e){j(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),I=T.getRootProps,R=T.getInputProps,k=T.isDragActive,P=n.a.useCallback((function(e){y(!0),b(e).then((function(e){y(!1),setTimeout((function(){l&&l(e)}),a)})).catch((function(){y(!1)}))}),[l,b,a]);return Object(S.jsxs)(ne.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(S.jsxs)(ne.a,Object(v.a)(Object(v.a)({sx:{cursor:"pointer",height:f.length<1?"50vh":50,display:"flex",alignItems:"center",transition:"all 0.3s",borderWidth:1,borderColor:"divider",borderStyle:"solid",borderRadius:1,flexDirection:"column",justifyContent:"center",backgroundColor:k?"background.paper":"background.default"}},I()),{},{children:[Object(S.jsx)(ne.a,{children:k?i:o}),Object(S.jsx)("input",Object(v.a)({},R()))]})),Object(S.jsxs)(ne.a,{sx:{padding:2},children:[C.length>0&&Object(S.jsxs)(_e.a,{children:[Object(S.jsx)(He.a,{sx:{backgroundColor:"background.default"},children:"Queued"}),C.map((function(e,t){var a=e.file;return Object(S.jsx)(Pa,{file:a,onDelete:O(t)},a.name)}))]}),A.length>0&&Object(S.jsxs)(_e.a,{children:[Object(S.jsx)(He.a,{sx:{backgroundColor:"background.default"},children:"Uploaded"}),A.map((function(e,t){var a=e.file,r=e.progress;return Object(S.jsx)(Pa,{file:a,onDelete:O(C.length+t),progress:r,isUploading:g},a.name)}))]})]}),Object(S.jsx)(Ot.a,{}),Object(S.jsx)(ne.a,{sx:{padding:2,width:1,display:"flex",justifyContent:"flex-end"},children:Object(S.jsx)(E.a,{variant:"contained",disabled:!C.length||g,onClick:P,children:"Upload"})})]})},Da=a(352),wa=Object(f.a)((function(e){var t=e.typography,a=e.palette,r=e.spacing,n=e.mixins;return{root:Object(v.a)(Object(v.a)(Object(v.a)({},t.subtitle1),n.toolbar),{},{textTransform:"none",opacity:.8,"&::after":{color:a.primary.main,transition:"width 0.25s ease-in-out 0.05s",borderBottom:"0.25em solid",width:0,position:"absolute",bottom:0,left:0,content:'""'},"&:hover, &.active":{opacity:1,backgroundColor:"unset","&::after":{width:"100%"}},"&:not(:last-child)":{marginRight:r(2)}})}}))(E.a);var _a=Object(f.a)((function(e){var t=e.spacing;return{root:{backgroundColor:e.palette.background.paper},logo:{height:t(3),width:t(3)}}}))((function(e){var t=e.classes,a=Object(m.d)(),r=a.userName,n=a.onLogout;return Object(S.jsx)(Da.a,{className:t.root,elevation:0,color:"default",children:Object(S.jsxs)(ne.a,{display:"flex",px:2,height:1,alignItems:"center",justifyContent:"space-between",children:[Object(S.jsx)(ue.a,{className:t.logo,variant:"square",src:Q,alt:J}),Object(S.jsxs)(ne.a,{children:[Object(S.jsx)(wa,{variant:"text",component:o.c,to:"/search",color:"inherit",disableRipple:!0,children:"Home"}),Object(S.jsx)(wa,{variant:"text",component:o.c,to:"/upload",color:"inherit",disableRipple:!0,children:"Upload"}),Object(S.jsx)(wa,{variant:"text",component:o.c,to:"/about",color:"inherit",disableRipple:!0,children:"About"})]}),Object(S.jsx)(Ve,{userName:r,onLogout:n})]})})})),Ha=new(a(322).a);var La=Object(f.a)((function(e){var t=e.mixins,a=e.spacing;return{container:{height:"100vh",overflow:"auto",paddingTop:"calc(".concat(t.toolbar.minHeight,"px + ").concat(a(2),")"),paddingLeft:a(2),paddingRight:a(2)}}}))((function(e){var t=e.classes,a=n.a.useState(),r=Object(h.a)(a,2),i=r[0],c=r[1];return Object(S.jsx)(m.a,{cookieOptions:{maxAge:1209600,path:K},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:Kt,LoginProps:{error:i},children:Object(S.jsx)(p.a,{client:Ha,children:Object(S.jsx)(H,{children:Object(S.jsx)(U,{children:Object(S.jsxs)(P,{children:[Object(S.jsx)(_a,{}),Object(S.jsx)("div",{className:t.container,children:Object(S.jsxs)(O.d,{children:[Object(S.jsx)(O.b,{exact:!0,path:"/search/:itemId",children:Object(S.jsx)(Aa,{})}),Object(S.jsx)(O.b,{exact:!0,path:"/search/",children:Object(S.jsx)(Ht,{})}),Object(S.jsx)(O.b,{exact:!0,path:"/upload/",children:Object(S.jsx)(Na,{})}),Object(S.jsx)(O.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(S.jsx)(O.b,{path:"*",children:Object(S.jsx)(Xt,{})})]})})]})})})})})}));c.a.render(Object(S.jsx)(Ze,{children:Object(S.jsx)(l.a,{injectFirst:!0,children:Object(S.jsx)(u.a,{theme:b,children:Object(S.jsx)(s.a,{children:Object(S.jsx)(d.b,{children:Object(S.jsx)(M,{splitters:{vertical:[75,25]},children:Object(S.jsx)(o.a,{basename:K,children:Object(S.jsx)(La,{})})})})})})})}),document.getElementById("root"))}},[[230,1,2]]]);