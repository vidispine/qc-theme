(this["webpackJsonpqc-theme"]=this["webpackJsonpqc-theme"]||[]).push([[0],{227:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(52),c=a.n(i),o=a(55),s=a(306),l=a(305),u=a(347),d=a(56),j=a(146),b=(a(183),Object(j.a)({components:{VdtUserAvatarButton:{styleOverrides:{avatar:{fontSize:"0.875rem",height:32,width:32}}},MuiTabs:{styleOverrides:{root:{backgroundColor:"#fff",borderBottom:"2px solid #7B61FF"},indicator:{backgroundColor:"#7B61FF",height:"100%",zIndex:1},flexContainer:{alignItems:"center"}}},MuiTab:{styleOverrides:{root:{zIndex:2,color:"inherit",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&.Mui-selected":{color:"#fff"}}}},MuiPaper:{styleOverrides:{root:{position:"relative",overflow:"hidden",flexShrink:0}},defaultProps:{variant:"outlined"}},MuiAvatar:{styleOverrides:{colorDefault:{color:"inherit",backgroundColor:"#f2f2f2"}}}},typography:{useNextVariants:!0,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{mode:"light",primary:{main:"#7B61FF"},secondary:{main:"#00b16a"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)",default:"#f2f2f2",paper:"#fff"}},mixins:{toolbar:{minHeight:56}}})),h=a(13),O=a(25),f=a(308),m=a(31),p=a(102),v=a(6),g=a(29),x=a(322),y=a(324),C=a(325),E=a(326),A=a(327),S=a(1),T=["Dialog"],I=function(e){var t=e.open,a=e.onClose,r=e.onSuccess,n=e.title,i=void 0===n?"Dialog":n,c=e.okText,o=void 0===c?"Ok":c,s=e.noText,l=void 0===s?"Cancel":s,u=e.message,d=void 0===u?"Message":u,j=e.Dialog,b=void 0===j?x.a:j;return Object(S.jsxs)(b,{open:t,onClose:a,children:[Object(S.jsx)(y.a,{children:i}),Object(S.jsx)(C.a,{dividers:!0,children:d}),Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{onClick:a,children:l}),Object(S.jsx)(A.a,{variant:"contained",color:"primary",onClick:r,children:o})]})]})},R=function(e){var t=e.Dialog,a=void 0===t?I:t,r=Object(g.a)(e,T);return Object(S.jsx)(a,Object(v.a)({},r))},P=n.a.createContext({}),N=function(e){var t=e.children,a=n.a.useState(!1),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useState({}),s=Object(h.a)(o,2),l=s[0],u=l.config,d=l.resolve,j=l.reject,b=s[1],O=function(){c(!1)};return Object(S.jsxs)(P.Provider,{value:{openDialog:function(e){c(!0),b(e)}},children:[Object(S.jsx)(R,Object(v.a)(Object(v.a)({},u),{},{open:i,onSuccess:function(e){d(e),O()},onClose:function(e){j(e),O()}})),t]})},k=function(){var e=n.a.useContext(P).openDialog;return{showDialog:function(t){return new Promise((function(a,r){return e({config:t,resolve:a,reject:r})}))}}},_=a(321),w=a(11),D=n.a.createContext();var H=function(e){var t=e.children,a=Object(_.a)(["preset"],(function(){return w.c.listAnalyzePreset().then((function(e){var t=e.data,a=(void 0===t?{}:t).preset;return(void 0===a?[]:a).map((function(e){return e.name}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),r=a.data,i=void 0===r?[]:r,c=a.isLoading,o=a.isError,s=n.a.useState(""),l=Object(h.a)(s,2),u=l[0],d=l[1],j=n.a.useMemo((function(){return u?i.filter((function(e){return e.toLowerCase().includes(u.toLowerCase())})):i}),[u,i]);return Object(S.jsx)(D.Provider,{value:{presets:j,onSearch:function(e){return d(e)},isLoading:c,isError:o},children:t})};var L=a(4),F=n.a.createContext({splitters:{}}),G="LAYOUT_SPLITTERS",M=function(e){var t=e.splitters,a=e.children,r=n.a.useState((function(){return function(){try{return JSON.parse(localStorage.getItem(G))||t}catch(e){return t}}()})),i=Object(h.a)(r,2),c=i[0],o=i[1];n.a.useEffect((function(){localStorage.setItem(G,JSON.stringify(c))}),[c]);return Object(S.jsx)(F.Provider,{value:{splitters:c,resetSplitters:function(){o(t)},setSplitter:function(e,t){o((function(a){return Object(v.a)(Object(v.a)({},a),{},Object(L.a)({},e,t))}))}},children:a})};var q=a(137),B=["uri"],U=n.a.createContext();function z(){return Object(_.a)(["storages"],(function(){return w.q.listStorage({}).then((function(e){var t=e.data;return(void 0===t?{}:t).storage.reduce((function(e,t){var a=t.method,r=void 0===a?[]:a,n=t.metadata,i=void 0===n?{}:n,c=t.id,o={},s="generic",l=i.field,u=void 0===l?[]:l;if(u.length){if(u.some((function(e){return"transcodeThemeSourceStorage"===e.key}))&&(s="input"),u.some((function(e){return"transcodeThemeOutputStorage"===e.key}))&&(s="output"),!s)return e;var d=(u.find((function(e){return"description"===e.key}))||{}).value,j=void 0===d?"-":d;o.description=j}var b=Object(h.a)(r,1)[0];if(b){var O=b.uri,f=Object(g.a)(b,B),m=new URL(O),p=m.protocol,x=m.pathname,y=m.search;x.startsWith("//")&&(x=x.slice(2)),p.endsWith(":")&&(p=p.slice(0,-1)),y.startsWith("?")&&(y=y.slice(1));var C=x.split("@"),E=Object(h.a)(C,2),A=E[0],S=E[1],T=A.split(":_VSENC__"),I=Object(h.a)(T,2),R=I[0],P=I[1],N=S.split("/"),k=Object(q.a)(N),_=k[0],w=k.slice(1).join("/"),D=y.split("&").reduce((function(e,t){var a=t.split("="),r=Object(h.a)(a,2),n=r[0],i=r[1];return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},n,i))}),{});Object.assign(o,Object(v.a)(Object(v.a)({accessKey:R,secretKey:P,name:_,path:w,protocol:p,storageId:c},D),f))}return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},s,o))}),{})}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}function W(){return Object(_.a)(["resources"],(function(){return w.n.listResourceType({resourceType:"vidinet"}).then((function(e){var t=e.data;return(void 0===t?{}:t).resource.map((function(e){var t=e.id,a=e.vidinet;return Object(v.a)({id:t},a)}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var V=function(e){var t=e.children,a=z(),r=a.data,n=a.isLoading,i=a.isError,c=W(),o=c.data,s=c.isLoading,l=c.isError,u=n||s,d=i||l;return Object(S.jsx)(U.Provider,{value:{onUpdateStorage:function(e){var t=e.input,a=e.output,r=Object(v.a)(Object(v.a)({},t),a),n=r.protocol,i=r.accessKey,c=r.secretKey,o=r.name,s=r.path,l=r.id,u=r.storageId,d="".concat(n,"://").concat(i,":_VSENC__").concat(c,"@").concat(o,"/").concat(s);if("/"!==d.charAt(d.length-1)&&(d=d.concat("/")),u)return w.q.modifyStorageMethod({storageMethodId:l,storageId:u,queryParams:{uri:d}});var j={type:"LOCAL",capacity:8e11,method:[{uri:d,read:!0,write:!0,browse:!0}],metadata:{field:[]}};return t?j.metadata.field=[{key:"transcodeThemeSourceStorage",value:!0}]:a&&(j.metadata.field=[{key:"transcodeThemeOutputStorage",value:!0}]),w.q.createStorage({storageDocument:j})},storages:r,resources:o,isLoading:u,isError:d},children:t})},Q=a.p+"static/media/logo.db253c2c.svg",J=a.p+"static/media/header-logo.f0892ea4.svg",K=Q,Y=J,X="VidiCore QC Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/qc-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore QC Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore QC Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/qc-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore QC Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore QC Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore QC Theme";var Z="https://vidispine.github.io/qc-theme";Z&&Z.startsWith("http")&&(Z=(Z=new URL(Z)).pathname.replace(/(.+?)\/+$/,"$1"));var $=Z,ee=a(103),te=a.n(ee),ae=a(71),re=a.n(ae),ne=a(26),ie=a(292),ce=a(293),oe=a(328),se=a(110),le=a(323),ue=a(318),de=a(290),je=a(313),be=a(319),he=a(307),Oe=a(330),fe=["queryParams","itemSearchDocument","rowsPerPage","page"],me={CHANGE_PAGE:"CHANGE_PAGE",CHANGE_ROWS:"CHANGE_ROWS",CHANGE_SORT:"CHANGE_SORT",CHANGE_SEARCHTEXT:"CHANGE_SEARCHTEXT",CHANGE_SEARCHFIELD:"CHANGE_SEARCHFIELD",CHANGE_SEARCHFIELDFACET:"CHANGE_SEARCHFIELDFACET",CHANGE_SEARCHFILTER:"CHANGE_SEARCHFILTER",CHANGE_SEARCHFILTERFACET:"CHANGE_SEARCHFILTERFACET",CHANGE_PARENT_COLLECTION:"CHANGE_PARENT_COLLECTION",CHANGE_FACET:"CHANGE_FACET",CHANGE_ITEMSEARCHDOCUMENT:"CHANGE_ITEMSEARCHDOCUMENT",CHANGE_QUERYPARAMS:"CHANGE_QUERYPARAMS",CHANGE_MATRIXPARAMS:"CHANGE_MATRIXPARAMS",CHANGE_SUGGESTION:"CHANGE_SUGGESTION"},pe=function(e,t){switch(t.type){case me.CHANGE_ITEMSEARCHDOCUMENT:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:t.itemSearchDocument});case me.CHANGE_QUERYPARAMS:return Object(v.a)(Object(v.a)({},e),{},{queryParams:t.queryParams});case me.CHANGE_PAGE:return Object(v.a)(Object(v.a)({},e),{},{page:t.page,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:t.page*e.rowsPerPage+1})});case me.CHANGE_ROWS:return Object(v.a)(Object(v.a)({},e),{},{rowsPerPage:t.rowsPerPage,page:0,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1,number:t.rowsPerPage})});case me.CHANGE_SORT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,sort:t.value,itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{sort:t.field?[{field:t.field,order:t.order||"descending"}]:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SEARCHTEXT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[{value:"".concat(t.value)}]}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SEARCHFIELD:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SEARCHFIELDFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,facet:t.facet,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SEARCHFILTER:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SEARCHFILTERFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_FACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,facet:t.facet,itemSearchDocument:t.facet?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_PARENT_COLLECTION:return Object(v.a)(Object(v.a)({},e),{},{page:0,parentCollection:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:{field:[{name:"__parent_collection",value:[{value:"".concat(t.value)}]},{name:"__collection",value:[{value:"".concat(t.value)}]}],operation:"OR"}}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:void 0}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case me.CHANGE_SUGGESTION:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{suggestion:t.suggestion})});default:return e}};function ve(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,a=void 0===t?{}:t,r=e.itemSearchDocument,n=void 0===r?{}:r,i=e.rowsPerPage,c=void 0===i?10:i,o=e.page,s=void 0===o?0:o,l=Object(g.a)(e,fe);return Object(v.a)(Object(v.a)({},l),{},{queryParams:Object(v.a)({content:"metadata",interval:"generic",first:s*c+1,number:c},a),itemSearchDocument:Object(v.a)({intervals:"generic",filter:[]},n),rowsPerPage:c,page:s})}(e),a=n.a.useReducer(pe,t),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useCallback((function(e){return c({type:me.CHANGE_SEARCHTEXT,value:e})}),[]),s=n.a.useCallback((function(e){return c({type:me.CHANGE_ITEMSEARCHDOCUMENT,itemSearchDocument:e})}),[]),l=n.a.useCallback((function(e){return c({type:me.CHANGE_ITEMQUERYPARAMS,queryParams:e})}),[]);return{state:i,onChangeRowsPerPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value;return c({type:me.CHANGE_ROWS,rowsPerPage:t})},onChangePage:function(e){var t=e.page;return c({type:me.CHANGE_PAGE,page:t})},onChangeSort:function(e,t,a){return c({type:me.CHANGE_SORT,field:t,order:a})},setSearchText:o,setSearchField:n.a.useCallback((function(e){return c({type:me.CHANGE_SEARCHFIELD,field:e})}),[]),setSearchFieldFacet:n.a.useCallback((function(e){var t=e.map((function(e){return{field:e.name,count:!0}}));c({type:me.CHANGE_SEARCHFIELDFACET,field:e,facet:t})}),[]),setSearchFilter:n.a.useCallback((function(e){return c({type:me.CHANGE_SEARCHFILTER,filter:e})}),[]),setSearchFilterFacet:n.a.useCallback((function(e){var t=e.reduce((function(e,t){var a=t.field,r=void 0===a?[]:a;return e.concat(r)}),[]).map((function(e){var t=e.name;return{name:t,field:t,count:!0,exclude:[t]}}));c({type:me.CHANGE_SEARCHFILTERFACET,filter:e,facet:t})}),[c]),setFacet:n.a.useCallback((function(e){c({type:me.CHANGE_FACET,facet:e})}),[c]),setItemSearchDocument:s,setQueryParams:l,setParentCollection:n.a.useCallback((function(e){return c({type:me.CHANGE_PARENT_COLLECTION,value:e})}),[]),setSuggestion:n.a.useCallback((function(e){c({type:me.CHANGE_SUGGESTION,suggestion:e})}),[])}}var ge=a(19),xe=a(348),ye=["test-plan","created"];function Ce(e){var t=e.shape,a=void 0===t?[]:t,r=e.id,i=Object(xe.a)(a.map((function(e){var t=e.id;return{queryKey:["baton",r,t],queryFn:function(){return function(e){var t=e.itemId,a=e.shapeId;return w.d.getShapeBulkyMetadata({itemId:t,shapeId:a,key:"baton_report_files"}).then((function(e){var r=e.data,n=(void 0===r?{}:r).field,i=void 0===n?[]:n;if(!i.length)return!1;var c=i.reduce((function(e,t){var a=t.maps;return[].concat(Object(ge.a)(e),Object(ge.a)(a.map))}),[]).map((function(e){return e.entry.reduce((function(e,t){var a=t.key,r=t.value;return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},a,r))}),{})})).reduce((function(e,t){var a=t["test-plan"],r=t.created,n=Object(g.a)(t,ye),i=e.findIndex((function(e){return e.name===a}));return i<0?[].concat(Object(ge.a)(e),[{name:a,created:r,files:[Object(v.a)({},n)]}]):(e[i].files.push(Object(v.a)({},n)),e)}),[]);return{itemId:t,shapeId:a,testplans:c}})).catch((function(){return!1}))}({itemId:r,shapeId:t})},refetchOnWindowFocus:!1,staleTime:1/0,retry:!1}}))),c=i.some((function(e){return e.isLoading})),o=n.a.useMemo((function(){var e=i.filter((function(e){return!!e.data}));return[e.length>0,e.map((function(e){return e.data}))]}),[i]),s=Object(h.a)(o,2);return{isLoading:c,hasQc:s[0],reports:s[1]}}var Ee=function(e){var t=e.metadata,a=void 0===t?{}:t,r=e.shape;r=void 0===r?[{}]:r;var n=Object(h.a)(r,1)[0];return Object(v.a)(Object(v.a)(Object(v.a)({},Object(ne.f)(a,{flat:!0,arrayOnSingle:!1})),Object(ne.g)(n)),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).containerComponent,t=(void 0===e?{}:e).file,a=void 0===t?[{}]:t,r=Object(h.a)(a,1)[0],n=r.timestamp,i=r.id,c=r.storage;return{timestamp:re()(n).format("L"),fileId:i,storageId:c}}(n))},Ae=function(e){var t=e.fields,a=e.data;return Object(S.jsx)(oe.a,{display:"grid",gridTemplateColumns:"auto 1fr",gap:1,children:t.map((function(e){var t=e.key,r=e.label;return Object(S.jsxs)(oe.a,{display:"contents",children:[Object(S.jsxs)(se.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(S.jsx)(se.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:te()(a,t,"-")})]},t)}))})},Se=[[{key:"title",label:"Title"},{key:"fileSize",label:"Filesize"}],[{key:"duration",label:"Duration"},{key:"timestamp",label:"Timestamp"},{key:"dimension",label:"Resolution"},{key:"frameRate",label:"Framerate"}],[{key:"videoCodec",label:"Video codec"},{key:"videoBitrate",label:"Bitrate"},{key:"audioCodec",label:"Audio codec"},{key:"audioChannels",label:"Audio channels"}]],Te=Object(f.a)((function(e){var t=e.spacing,a=e.typography;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto auto 1fr 1fr 1fr auto",gap:t(2),alignItems:"start","& > .MuiAvatar-root":{display:"flex",flexDirection:"column",fontSize:a.fontSize},"& > .MuiListItemIcon-root":{minWidth:"unset",marginLeft:t(-1),marginTop:t(-1)},"&:not(:last-child)":{marginBottom:t(2)},"& > *:first-child:not(.MuiListItemIcon-root)":{gridColumn:"1 / 2 span"},"& > *:last-child:nth-child(4)":{gridColumn:"5 / 2 span"}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.onQc,a=void 0===t?function(){return null}:t,r=e.classes,i=e.itemType,c=void 0===i?{}:i,s=e.checkbox,l=void 0!==s&&s,u=e.interactive,d=void 0===u||u,j=Ce(c).hasQc,b=n.a.useMemo((function(){return Ee(c)}),[c]);return Object(S.jsx)(le.a,{className:r.paper,children:Object(S.jsxs)(ue.a,{button:!0,disableRipple:!0,className:r.root,children:[d&&l&&Object(S.jsx)(de.a,{children:Object(S.jsx)(je.a,{})}),Object(S.jsx)(be.a,{variant:"square",children:c.id.split("-").map((function(e){return Object(S.jsx)("span",{children:e},e)}))}),Se.map((function(e){return Object(S.jsx)(Ae,{data:b,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),d&&Object(S.jsxs)(oe.a,{height:1,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[Object(S.jsx)(he.a,{title:"QC file",children:Object(S.jsx)(Oe.a,{onClick:function(){return a(c)},children:Object(S.jsx)(ie.a,{})})}),Object(S.jsx)(he.a,{disabled:!j,title:"Review file",children:Object(S.jsx)(Oe.a,{component:o.b,to:"/search/".concat(b.itemId),children:Object(S.jsx)(ce.a,{})})})]})]})})})),Ie=a(331),Re=a(294),Pe=a(147),Ne=function(e){var t=e.icon,a=void 0===t?Re.a:t,r=e.children,i=e.size,c=n.a.useState(null),o=Object(h.a)(c,2),s=o[0],l=o[1],u=function(){l(null)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Oe.a,{onClick:function(e){l(e.currentTarget)},disableRipple:!0,size:i,children:Object(S.jsx)(a,{})}),Object(S.jsx)(Pe.a,{onClick:u,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u,elevation:1,PaperProps:{square:!0},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:r})]})},ke=a(149),_e=["classes","children"];var we=Object(f.a)((function(e){return{root:{"& > *":{overflow:"hidden"},display:"flex",width:"100%",height:"100%","& .gutter":{backgroundColor:e.palette.background.secondary,backgroundRepeat:"no-repeat",backgroundPosition:"50%"},"& .gutter.gutter-horizontal":{flexDirection:"column",cursor:"col-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==')"},"& .gutter.gutter-vertical":{flexDirection:"row",cursor:"row-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')"}}}}))((function(e){var t=e.classes,a=e.children,r=Object(g.a)(e,_e);return Object(S.jsx)(ke.a,Object(v.a)(Object(v.a)({},r),{},{className:t.root,children:a}))})),De=a(35),He=a(295),Le=a(296),Fe=function(e){var t=e.onClear,a=e.canClear;return Object(S.jsxs)(oe.a,{display:"flex",alignItems:"center",height:1,children:[a&&Object(S.jsx)(Oe.a,{size:"small",disableRipple:!0,onClick:t,children:Object(S.jsx)(He.a,{})}),Object(S.jsx)(A.a,{style:{height:"100%",borderRadius:0},type:"submit",color:"primary",variant:"contained",disableRipple:!0,children:Object(S.jsx)(Le.a,{})})]})},Ge=function(e){var t=e.onSubmit,a=e.onChange,r=e.value,i=e.defaultValue,c=e.searchPlaceholder,o=e.classes,s=n.a.useRef(null),l=n.a.useState(Boolean(i)),u=Object(h.a)(l,2),d=u[0],j=u[1],b=function(e){a(e),j(s.current.value.length>0)};return Object(S.jsx)("form",{onSubmit:function(e){e.preventDefault(),s&&s.current&&s.current.blur();var a=(s.current||"").value;t(a),a&&j(!0)},children:Object(S.jsx)(De.c,{fullWidth:!0,value:r,classes:o,defaultValue:i,placeholder:c,inputRef:s,onChange:function(e){return b(e.target.value)},endAdornment:Object(S.jsx)(Fe,{onClear:function(){var e;j(!1),t(""),void 0===(e="")&&(s.current.value=e),b(e)},canClear:d})})})},Me=Object(f.a)((function(e){var t=e.spacing,a=e.palette,r=e.transitions;return{root:{height:t(6),paddingLeft:t(2),borderColor:a.primary.main,borderRadius:t(.5),backgroundColor:a.background.paper,transition:r.create(["box-shadow"])},input:{paddingTop:0,paddingBottom:0},focused:{boxShadow:"inset 0 0 0 2px ".concat(a.primary.main)}}}))((function(e){var t=e.value,a=e.onSubmit,r=void 0===a?function(){return null}:a,n=e.onChange,i=e.classes,c=e.placeholder,o=void 0===c?"Search files...":c;return Object(S.jsx)(le.a,{children:Object(S.jsx)(Ge,{value:t,classes:i,onChange:n,onSubmit:r,searchPlaceholder:o})})})),qe=a(297),Be=a(298),Ue=a(332),ze=a(333),We=a(299),Ve=n.a.forwardRef((function(e,t){var a=e.response,r=e.classes,i=Object(d.c)().closeSnackbar,c=n.a.useMemo((function(){return a.some((function(e){return e.error}))?"Some jobs failed":"All jobs started successfully"}),[a]);return Object(S.jsx)(d.a,{ref:t,children:Object(S.jsx)(le.a,{children:Object(S.jsx)(Ie.a,{subheader:Object(S.jsxs)(Ue.a,{className:r.header,children:[c,Object(S.jsx)(Oe.a,{onClick:i,size:"small",children:Object(S.jsx)(He.a,{fontSize:"small"})})]}),children:a.map((function(e){var t=e.tag,a=e.error;return Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(ze.a,{children:Object(S.jsxs)(be.a,{children:[a&&Object(S.jsx)(qe.a,{color:"error",fontSize:"small"}),!a&&Object(S.jsx)(Be.a,{color:"action",fontSize:"small"})]})}),Object(S.jsx)(We.a,{secondaryTypographyProps:{color:"error"},primary:t,secondary:a})]},t)}))})})})})),Qe=(Object(f.a)((function(){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}))(Ve),a(99)),Je=a(100),Ke=a(150),Ye=a(148),Xe=a(334),Ze=function(e){Object(Ke.a)(a,e);var t=Object(Ye.a)(a);function a(e){var r;return Object(Qe.a)(this,a),(r=t.call(this,e)).state={hasError:!1},r}return Object(Je.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,r=t.error;return a?Object(S.jsx)(Xe.a,{maxWidth:"sm",children:Object(S.jsxs)(le.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(S.jsx)("h3",{children:"We're sorry - something went wrong: "}),r&&Object(S.jsx)("div",{style:{color:"#e57373"},children:r.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(n.a.Component),$e=a(329),et=a(335),tt=Object(f.a)((function(e){return{paper:{"&:not(:last-child)":{marginBottom:(0,e.spacing)(1)}}}}))((function(e){var t=e.entity,a=e.preset,r=e.onClick,i=e.selected,c=void 0===i?[]:i,o=e.classes,s=e.resourceId,l=t.itemId,u=t.shapeId,d=function(e){var t=e.preset,a=e.itemId,r=e.shapeId,n=e.resourceId;return Object(_.a)(["preset",t,a,r],(function(){return new Promise((function(e,i){w.p.createShapeAnalyze({itemId:a,shapeId:r,queryParams:{resourceId:n,preset:t},costEstimate:!0,analyzeJobDocument:{}}).then((function(t){var a=t.data,r=(a=void 0===a?{}:a).id;!function t(){return w.t.getCostEstimate({costEstimateId:r}).then((function(a){var r=a.data,n=r.state,i=r.service,c=void 0===i?[{}]:i;if("FINISHED"!==n)setTimeout(t,1e3);else{var o=Object(h.a)(c,1)[0].cost,s=(o=void 0===o?{}:o).value;e(void 0===s?0:s)}})).catch(i)}()})).catch(i)}))}),{refetchOnWindowFocus:!1,staleTime:1/0,retry:!1})}({preset:a,itemId:l,shapeId:u,resourceId:s}),j=d.data,b=void 0===j?{}:j,O=d.isLoading,f=d.isError,m=n.a.useMemo((function(){return c.includes(a)}),[c,a]);return Object(S.jsx)(le.a,{className:o.paper,children:Object(S.jsxs)(ue.a,{disabled:O,onClick:function(){return r(a)},disableRipple:!0,className:o.root,button:!0,ContainerComponent:"div",children:[Object(S.jsx)(de.a,{children:Object(S.jsx)(je.a,{edge:"start",checked:m,color:"primary"})}),Object(S.jsx)(We.a,{primary:a}),Object(S.jsxs)($e.a,{children:[O&&Object(S.jsx)(et.a,{size:20}),!f&&!O&&Object(S.jsxs)("span",{children:["$",b]})]})]})})})),at=function(e){var t=e.entity,a=e.selected,r=e.setSelected,i=e.resourceId,c=function(){var e=n.a.useContext(D);if(void 0===e)throw new Error("usePreset must be used within a PresetProvider");return e}(),o=c.presets,s=c.onSearch,l=function(e){a.includes(e)?r([]):r([e])};return Object(S.jsxs)(oe.a,{overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column",children:[Object(S.jsx)(oe.a,{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:10,bgcolor:"background.default",children:Object(S.jsx)(Me,{onChange:s,placeholder:"Search profiles..."})}),Object(S.jsx)(oe.a,{mt:1,children:o.map((function(e){return Object(S.jsx)(tt,{entity:t,preset:e,onClick:l,selected:a,resourceId:i},e)}))})]})},rt=function(e){var t=e.open,a=e.onSuccess,r=e.onError,i=e.onClose,c=e.item,o=void 0===c?{}:c,s=function(e){var t=e.type,a=n.a.useContext(U);if(t){var r=a.resources.find((function(e){return e.type===t}));a=Object(v.a)(Object(v.a)({},a),{},{resource:r})}return a}({type:"BATON"}).resource,l=n.a.useState([]),u=Object(h.a)(l,2),d=u[0],j=u[1],b=n.a.useMemo((function(){return s&&s.id}),[s]),O=n.a.useMemo((function(){var e=o.shape,t=void 0===e?[]:e;return{itemId:o.id,shapeId:(t.find((function(e){var t=e.tag;return(void 0===t?[]:t).includes("original")}))||{}).id}}),[o]);return Object(S.jsxs)(x.a,{open:t,onClose:i,children:[Object(S.jsx)(y.a,{children:"QC"}),Object(S.jsxs)(C.a,{dividers:!0,children:[Object(S.jsx)(Te,{itemType:o,interactive:!1}),Object(S.jsx)(at,{entity:O,selected:d,setSelected:j})]}),Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{onClick:i,children:"Close"}),Object(S.jsx)(A.a,{variant:"contained",color:"primary",onClick:function(){var e=O.itemId,t=O.shapeId,n={preset:Object(h.a)(d,1)[0],resourceId:b};return w.p.createShapeAnalyze({itemId:e,shapeId:t,queryParams:n}).then(a).catch(r)},children:"Start QC"})]})]})},nt=function(e){var t=e.itemListType,a=void 0===t?{}:t,r=e.page,n=e.onChangePage,i=a.item,c=void 0===i?[]:i,o=a.hits,s=k().showDialog,l=Object(d.c)().enqueueSnackbar,u=function(e){return s({Dialog:rt,item:e}).then((function(){return l("QC Job started!")})).catch((function(e){var t=e.message;return t&&l(t,{variant:"error"})}))};return Object(S.jsxs)(oe.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(S.jsx)(oe.a,{overflow:"auto",height:1,children:Object(S.jsx)(Ie.a,{disablePadding:!0,children:c.map((function(e){return Object(S.jsx)(Te,{itemType:e,allowQc:!0,onQc:u},e.id)}))})}),Object(S.jsxs)(oe.a,{display:"flex",justifyContent:"flex-end",children:[Object(S.jsx)(A.a,{disabled:r<1,onClick:function(){return n({page:r-1})},children:"Prev"}),Object(S.jsx)(A.a,{disabled:10*(r+1)>o,onClick:function(){return n({page:r+1})},children:"Next"})]})]})},it=a(141),ct=a.n(it),ot=a(310),st=a(337),lt=a(300),ut=a(301),dt=a(302),jt=a(336),bt="READY",ht="STARTED",Ot="VIDINET_JOB",ft="FINISHED",mt="FINISHED_WARNING",pt="WAITING",vt="ABORTED_PENDING",gt="ABORTED",xt="FAILED_TOTAL",yt=[bt,ht,Ot,pt,vt],Ct=[ft,mt,xt,gt],Et=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,r=e.label;return Object(S.jsxs)(oe.a,{display:"contents",children:[Object(S.jsxs)(se.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(S.jsx)(se.a,{variant:"body2",color:"textPrimary",children:te()(a,t,"-")})]},t)}))},At=[{key:"type",label:"Job type"},{key:"jobId",label:"Job ID"}],St=Object(f.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),padding:t(1,0),display:"flex",flexDirection:"column",alignItems:"stretch","&:not(:last-child)":{marginBottom:t(2)}},top:{padding:t(1,2),display:"grid",alignItems:"start",gridTemplateColumns:"auto 1fr auto",gap:t(2),"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:t(0,2)}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.jobType,a=void 0===t?{}:t,r=e.classes,i=e.onAbort,c=n.a.useState(a),o=Object(h.a)(c,1)[0],s=o.status,l=o.started,u=o.jobId,d=function(e){var t=e.jobId,a=e.type,r=e.status,i=n.a.useState(0),c=Object(h.a)(i,2),o=c[0],s=c[1];return{request:n.a.useCallback((function(){Ct.includes(r)?s(100):function e(){return w.i.getJob({jobId:t}).then((function(t){var r=t.data,n=(r=void 0===r?{}:r).status,i=r.log,c=100;"TRANSCODE"===a&&(c=200);var o=((void 0===i?{}:i).task.find((function(e){return e.step===c}))||{}).progress;s((void 0===o?{}:o).value||0),yt.includes(n)&&setTimeout((function(){return e()}),2500)}))}()}),[t,a,r]),value:o}}(a),j=d.request,b=d.value,O=void 0===b?100:b;return n.a.useEffect(j,[j]),Object(S.jsx)(le.a,{className:r.paper,children:Object(S.jsxs)(ue.a,{className:r.root,children:[Object(S.jsxs)(oe.a,{className:r.top,children:[Object(S.jsx)(be.a,{variant:"square",children:"J"}),Object(S.jsx)(oe.a,{children:Object(S.jsx)(Et,{data:a,fields:At})}),Object(S.jsxs)(Oe.a,{size:"small",onClick:function(){return yt.includes(s)&&i(u)},children:[yt.includes(s)&&Object(S.jsx)(lt.a,{}),Ct.includes(s)&&Object(S.jsx)(ut.a,{})]})]}),Object(S.jsx)(dt.a,{}),Object(S.jsxs)(oe.a,{children:[Object(S.jsxs)(oe.a,{py:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(S.jsx)(se.a,{color:"textPrimary",variant:"button",children:s}),Object(S.jsx)(se.a,{color:"textSecondary",variant:"caption",children:re()(l).fromNow()})]}),Object(S.jsx)(jt.a,{variant:"determinate",value:O})]})]})})})),Tt={step:!0,type:"RAW_IMPORT,PLACEHOLDER_IMPORT,TRANSCODE",sort:"startTime desc",number:10},It=function(e){var t=e.jobListType,a=e.page,r=e.isLoading,n=e.onAbort,i=void 0===n?function(){return null}:n,c=e.setPage,o=t.job,s=void 0===o?[]:o,l=t.hits,u=void 0===l?0:l;return Object(S.jsxs)(oe.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(S.jsx)(oe.a,{overflow:"auto",height:1,children:Object(S.jsxs)(Ie.a,{disablePadding:!0,children:[s.map((function(e){return Object(S.jsx)(St,{jobType:e,onAbort:i},e.jobId)})),!r&&s.length<1&&Object(S.jsx)("span",{children:"No jobs found"})]})}),Object(S.jsxs)(oe.a,{display:"flex",justifyContent:"flex-end",children:[Object(S.jsx)(A.a,{disabled:!a,onClick:function(){return c(a-1)},children:"Prev"}),Object(S.jsx)(A.a,{disabled:10*(a+1)>u,onClick:function(){return c(a+1)},children:"Next"})]})]})},Rt=function(){var e=k().showDialog,t=Object(d.c)().enqueueSnackbar,a=n.a.useState("active"),r=Object(h.a)(a,2),i=r[0],c=r[1],o=n.a.useState(0),s=Object(h.a)(o,2),l=s[0],u=s[1],j=Object(m.c)(w.i.listJob),b=j.request,O=j.data,f=void 0===O?{}:O,p=j.isLoading,g=n.a.useCallback((function(){var e=Object(v.a)(Object(v.a)({},Tt),{},{state:yt,first:10*l+1});b({queryParams:e})}),[l]),x=Object(m.c)(w.i.listJob),y=x.request,C=x.data,E=void 0===C?{}:C,A=x.isLoading,T=n.a.useCallback((function(){var e=Object(v.a)(Object(v.a)({},Tt),{},{state:Ct,first:10*l+1});y({queryParams:e})}),[l]);n.a.useEffect((function(){g(),T();var e=setInterval((function(){g(),T()}),15e3);return function(){return clearInterval(e)}}),[l,i]);var I=p||A;return Object(S.jsxs)(oe.a,{display:"grid",gridTemplateRows:"auto 1fr",gap:2,children:[Object(S.jsx)(le.a,{children:Object(S.jsxs)(ot.a,{value:i,onChange:function(e,t){u(0),c(t)},children:[Object(S.jsx)(st.a,{disableRipple:!0,value:"active",label:"Active (".concat(f.hits||0,")")}),Object(S.jsx)(st.a,{disableRipple:!0,value:"finished",label:"Finished (".concat(E.hits||0,")")}),I&&Object(S.jsx)(st.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(S.jsx)(et.a,{size:20})})]})}),Object(S.jsx)(oe.a,{overflow:"hidden",hidden:"active"!==i,children:Object(S.jsx)(It,{jobListType:f,page:l,setPage:u,isLoading:I,onAbort:function(a){return e({message:"Are you sure you want to abort this job?",okText:"Yes, abort job",noText:"No, cancel"}).then((function(){return w.i.abortJob({jobId:a})})).then((function(){return t("Job aborted!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))}})}),Object(S.jsx)(oe.a,{overflow:"hidden",hidden:"finished"!==i,children:Object(S.jsx)(It,{jobListType:E,page:l,setPage:u,isLoading:I})})]})},Pt=["state"],Nt={itemSearchDocument:{},queryParams:{content:"shape,metadata",field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"}]},rowsPerPage:10},kt=function(){var e=n.a.useState(""),t=Object(h.a)(e,2),a=t[0],r=t[1],i=function(){var e=n.a.useContext(F);if(void 0===e)throw new Error("useSplitters must be used within a SplitterContext");return e}(),c=i.splitters,o=i.setSplitter,s=ve(Nt),l=s.state,u=Object(g.a)(s,Pt),d=Object(m.e)(l),j=d.itemListType,b=void 0===j?{}:j,O=d.isLoading,f=d.isError,p=d.onRefresh,x=l.page,y=n.a.useRef(ct()(u.setSearchText,500)).current;return n.a.useEffect((function(){return f&&setTimeout(p,5e3)}),[f]),n.a.useEffect((function(){return y("*".concat(a.toLowerCase(),"*"))}),[a]),Object(S.jsxs)(oe.a,{height:1,display:"flex",flexDirection:"column",children:[Object(S.jsx)(Me,{onChange:r,value:a}),Object(S.jsx)(oe.a,{mt:2,flexGrow:1,overflow:"hidden",children:Object(S.jsxs)(we,{style:{flexDirection:"row"},direction:"horizontal",minSize:375,sizes:c.vertical,gutterSize:20,onDragEnd:function(e){return o("horizontal",e)},children:[Object(S.jsxs)(oe.a,{display:"grid",gridTemplateRows:"auto 1fr",gap:2,children:[Object(S.jsx)(le.a,{children:Object(S.jsxs)(ot.a,{value:"input",children:[Object(S.jsx)(st.a,{disableRipple:!0,value:"input",label:"Input (".concat(b.hits||0,")")}),O&&Object(S.jsx)(st.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(S.jsx)(et.a,{size:20})})]})}),Object(S.jsxs)(oe.a,{overflow:"hidden",children:[Object(S.jsx)(nt,Object(v.a)({page:x,itemListType:b},u)),","]})]}),Object(S.jsx)(Rt,{})]})})]})},_t=a(320),wt=a(315),Dt=a(311),Ht=a(88),Lt=a(338),Ft=a(309),Gt=a(339),Mt=["name","onChange","value"],qt=["input","meta","helperText","classes","className","FormControlProps"],Bt=Object(f.a)((function(e){return{root:{marginTop:(0,e.spacing)(1),width:"100%","& .MuiInputBase-root":{fontSize:".75rem"},"& .MuiInputBase-input":{fontWeight:500,fontSize:"0.875rem"}},text:{}}}))((function(e){var t=e.input,a=(t=void 0===t?{}:t).name,r=t.onChange,n=t.value,i=Object(g.a)(t,Mt),c=e.meta,o=(c=void 0===c?{}:c).touched,s=c.error,l=c.submitError,u=e.helperText,d=void 0===u?"\xa0":u,j=e.classes,b=(e.className,e.FormControlProps),h=void 0===b?{}:b,O=Object(g.a)(e,qt);return Object(S.jsx)(Lt.a,Object(v.a)(Object(v.a)({classes:{root:j.root}},h),{},{children:Object(S.jsx)(Ft.a,Object(v.a)({classes:{root:j.text},name:a,helperText:o&&(s||l)?s||l:d,error:(s||l)&&o,inputProps:i,onChange:r,value:n},O))}))})),Ut=function(e){var t=e.submitting,a=e.children;return Object(S.jsx)(A.a,{type:"submit",disabled:t,children:Object(S.jsxs)(oe.a,{position:"relative",children:[Object(S.jsx)(oe.a,{position:"absolute",height:1,width:1,display:t?"inherit":"none",children:Object(S.jsx)(et.a,{size:24})}),Object(S.jsx)(oe.a,{children:a})]})})},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,r=new RegExp(a),n=e.match(r);return n?null:t},Wt=function(e){var t=e.onSubmit,a=void 0===t?function(){return null}:t,r=e.helperText,n=e.initialValues;return Object(S.jsx)(Ht.b,{onSubmit:a,initialValues:n,subscription:{submitting:!0,submitError:!0},render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.submitError;return Object(S.jsxs)("form",{onSubmit:t,children:[Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(Ht.a,{name:"serverUrl",component:Bt,type:"text",label:"Vidispine API Server",validate:zt,variant:"standard",fullWidth:!0}),Object(S.jsx)(Ht.a,{name:"userName",component:Bt,type:"text",label:"Username",validate:function(e){return e?void 0:"Required"},variant:"standard",fullWidth:!0}),Object(S.jsx)(Ht.a,{name:"password",component:Bt,type:"password",label:"Password",validate:function(e){return e?void 0:"Required"},variant:"standard",fullWidth:!0})]}),Object(S.jsx)(oe.a,{py:r||n?0:.8,my:1,children:n&&Object(S.jsx)(Gt.a,{error:!0,children:n})}),Object(S.jsx)(oe.a,{children:Object(S.jsx)(Ut,{type:"submit",submitting:a,fullWidth:!0,children:"Login"})})]})}})};var Vt=Object(f.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,r=e.userName,n=e.serverUrl,i=e.error;return Object(S.jsxs)(_t.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(S.jsxs)(_t.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(S.jsx)(Dt.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(S.jsx)(Wt,{onSubmit:a,initialValues:{userName:r,serverUrl:n}})]}),Object(S.jsx)(wt.a,{mdDown:!0,children:Object(S.jsx)(_t.a,{item:!0,sm:!0,className:t.gridRight,children:Object(S.jsx)("img",{src:K,alt:X,className:t.logo})})})]})}));var Qt=Object(f.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(S.jsx)(se.a,{className:t.text,children:"Page does not exist"})})),Jt=a(343),Kt=a(344),Yt=a(342),Xt=a(340),Zt=a(345),$t=a(341),ea=a(143),ta=a(303),aa=a(304),ra={xml:{extension:"xml",type:"code",color:"#3478C7",glyphColor:"#fff"},pdf:{extension:"pdf",type:"acrobat",color:"#D93831",glyphColor:"#fff"}},na=function(e){var t=e.files,a=e.onDownload;return Object(S.jsx)(Xt.a,{padding:"checkbox",children:Object(S.jsx)(oe.a,{display:"flex",children:t.map((function(e){var t=e.filename,r=e.type;return Object(S.jsx)(Oe.a,{onClick:function(){return a({filename:t})},sx:{width:64,height:64,padding:2},children:Object(S.jsx)(ea.a,Object(v.a)({},ra[r]))},t)}))})})},ia=function(e){var t=e.date;return Object(S.jsx)(Xt.a,{children:re()(t).format("LLL")})},ca=function(e){var t=e.onHighlight;return Object(S.jsx)(Xt.a,{padding:"checkbox",children:Object(S.jsxs)(Ne,{children:[Object(S.jsxs)($t.a,{onClick:t,children:[Object(S.jsx)(de.a,{children:Object(S.jsx)(ta.a,{})}),Object(S.jsx)(We.a,{primary:"Show on timeline",secondary:"Display events on player timeline"})]}),Object(S.jsx)(dt.a,{}),Object(S.jsxs)($t.a,{disabled:!0,sx:{color:"error.main"},children:[Object(S.jsx)(de.a,{children:Object(S.jsx)(aa.a,{})}),Object(S.jsx)(We.a,{primary:"Delete report",secondary:"This action cannot be undone"})]})]})})},oa=function(e){var t=e.data,a=e.padding,r=e.value,i=e.type,c=e.onDownload,o=e.onHighlight,s=n.a.useMemo((function(){return t[r]||"-"}),[t,r]);return"menu"===i?Object(S.jsx)(ca,{onHighlight:o}):t[r]?"files"===i?Object(S.jsx)(na,{files:s,onDownload:c}):"date"===i?Object(S.jsx)(ia,{date:s,value:r}):Object(S.jsx)(Xt.a,{sx:Object(v.a)({},["info","error","warning"].includes(r)&&{color:"".concat(r,".main")}),padding:a,children:s}):Object(S.jsx)(Xt.a,{})},sa=function(e){var t=e.testplan,a=e.itemId,r=e.shapeId,i=e.columns,c=e.onHighlight,o=t.name,s=function(e){var t=e.filename;return w.d.getShapeBulkyMetadata({itemId:a,shapeId:r,key:"baton_report_files/as-file",queryParams:{extraMapValues:"filename=".concat(t)},responseType:"blob",headers:{accept:"application/octet-stream"}}).then((function(e){var t=e.data;return URL.createObjectURL(t)})).then((function(e){return Object.assign(document.createElement("a"),{href:e,download:t}).click()}))},l=Object(m.c)(w.d.getShapeBulkyMetadata),u=l.request,d=l.data,j=void 0===d?{}:d;n.a.useEffect((function(){u({itemId:a,shapeId:r,key:"baton_summary_".concat(t.name)})}),[a,u,r,t]);var b=n.a.useMemo((function(){return function(e,t){var a=e.field,r=void 0===a?[]:a;return Object(v.a)(Object(v.a)({},t),r.length&&Object(v.a)({},r.reduce((function(e,t){var a=t.maps,r=(void 0===a?{}:a).map,n=void 0===r?[]:r;return n.length?n.reduce((function(e,t){var a=t.entry,r=void 0===a?[]:a;return r.length?r.reduce((function(e,t){var a=t.key,r=t.value;if(!a||!r)return e;var n=a.slice(0,-1);return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},n,r))}),{}):e}),{}):e}),{})))}(j,t)}),[j,t]);return Object(S.jsx)(Yt.a,{children:i.map((function(e){var t=e.id,n=e.value,i=e.label,l=e.padding,u=e.type;return Object(S.jsx)(oa,{type:u,data:b,value:n,label:i,padding:l,onHighlight:function(){return c({testplan:o,shapeId:r,itemId:a})},onDownload:s},t)}))})},la=[{id:1,label:"Reports",type:"files",value:"files",padding:"checkbox"},{id:3,label:"Testplan",value:"name"},{id:4,label:"Date",value:"created",type:"date"},{id:5,label:"Errors",value:"error"},{id:6,label:"Warnings",value:"warning"},{id:7,label:"Info",value:"info"},{id:8,label:void 0,value:void 0,type:"menu"}],ua=function(e){var t=e.itemType,a=e.isLoading,r=e.columns,n=void 0===r?la:r,i=e.onHighlight,c=Ce(t).reports;return a?null:c.map((function(e){var t=e.itemId,a=e.shapeId,r=e.testplans;return Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(se.a,{variant:"h6",children:a}),Object(S.jsxs)(Jt.a,{children:[Object(S.jsx)("caption",{children:"Found ".concat(r.length," report").concat(1!==r.length?"s":"")}),Object(S.jsx)(Kt.a,{children:Object(S.jsx)(Yt.a,{children:n.map((function(e){var t=e.label,a=e.id,r=e.padding;return Object(S.jsx)(Xt.a,{padding:r,children:t},a)}))})}),Object(S.jsx)(Zt.a,{children:r.map((function(e){return Object(S.jsx)(sa,{columns:n,shapeId:a,itemId:t,testplan:e,onHighlight:i},e.name)}))})]})]},a)}))},da=a(145),ja=(a(226),function(e){var t=e.itemType,a=e.isLoading,r=e.playerRef,i=n.a.useMemo((function(){return Object(ne.b)(t,{allowedMimeTypes:["video/mp4"]})}),[t]);return a?null:Object(S.jsx)(da.a,{controls:!0,sources:i,ref:r,timecode:!0})}),ba=function(e){switch(e.toLowerCase()){case"fatal":case"serious":return"error.main";case"warning":return"warning.main";case"info":return"info.main";default:return"text.secondary"}},ha=function(e){var t=e.entry,a=e.offset,r=e.onClick,n=e.children,i=t.startTimecode,c=t.endTimecode,o=t.synopsis,s=t.severity,l=t.description,u=(i-a).toFixed(2),d=(c-a).toFixed(2);return Object(S.jsx)(he.a,{title:Object(S.jsx)(oe.a,{sx:{maxHeight:500,paddingRight:0,overflow:"auto","&::WebkitScrollbar":{WebkitAppearance:"none",width:8},"&::WebkitScrollbarThumb":{borderRadius:1,backgroundColor:"divider"}},children:Object(S.jsx)(oe.a,{sx:{cursor:"pointer"},onClick:function(){return r(u)},children:Object(S.jsxs)(_t.a,{container:!0,children:[Object(S.jsxs)(_t.a,{item:!0,container:!0,xs:3,direction:"column",children:[Object(S.jsx)(se.a,{variant:"subtitle2",color:ba(s),children:s}),Object(S.jsx)(se.a,{variant:"caption",children:Object(ne.c)(u).toSmpte()}),Object(S.jsx)(se.a,{variant:"caption",children:Object(ne.c)(d).toSmpte()})]}),Object(S.jsxs)(_t.a,{item:!0,container:!0,xs:9,direction:"column",children:[Object(S.jsx)(se.a,{variant:"subtitle2",children:o}),Object(S.jsx)(se.a,{variant:"caption",children:l})]})]})})}),children:n})},Oa=function(e){switch(e.toLowerCase()){case"fatal":case"serious":return"error.main";case"warning":return"warning.main";case"info":return"info.main";default:return"text.secondary"}},fa=function(e){var t=e.markers,a=e.duration,r=e.offset,i=e.onSeek,c=void 0===i?function(){return null}:i,o=n.a.useMemo((function(){return t.reduce((function(e,t){var a,r=t.startTimecode,n=t.endTimecode;return Object.entries(e).forEach((function(e){var t=Object(h.a)(e,2),i=t[0],c=t[1];(c.length||(a=i),void 0===a)&&(c.every((function(e){var t=e.startTimecode,a=e.endTimecode,i=(r-t+n-a)/2;return!(i<1&&i>-1)&&(!(t<r&&a>n)&&(!(t<r&&a>r)&&!(a>r&&a<n)))}))&&(a=i))})),void 0===a?Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},Object.keys(e).length,[t])):Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},a,(e[a]||[]).concat([t])))}),{0:[]})}),[t]),s=n.a.useMemo((function(){return Object.keys(o).length}),[o]);return Object(S.jsx)(oe.a,{sx:{height:12*s,position:"relative",width:1},children:Object.entries(o).map((function(e){var t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(S.jsx)(oe.a,{sx:{height:10,backgroundColor:"background.default",marginTop:"2px"},children:i.map((function(e){var t=e.startTimecode,i=e.endTimecode,o=e.severity,s=t/a*100,l=(i-t)/a*100,u=function(){return c(t)};return Object(S.jsx)(ha,{entry:e,offset:r,onClick:u,children:Object(S.jsx)(oe.a,{onClick:u,sx:{cursor:"pointer",borderRadius:1,backgroundColor:Oa(o),position:"absolute",top:12*n,left:"".concat(s,"%"),width:"".concat(l>1?l:1,"%"),height:10}})},t)}))},n)}))})},ma=["maps","start","end"],pa=function(e){var t=e.videoEl,a=function(e){var t=e.itemId,a=e.shapeId,r=e.testplan,i=Object(m.c)(w.p.getShape),c=i.request,o=i.data,s=void 0===o?{}:o;n.a.useEffect((function(){t&&a&&c({itemId:t,shapeId:a})}),[t,a,c]);var l=n.a.useMemo((function(){var e=s.containerComponent,t=(e=void 0===e?{}:e).duration,a=void 0===t?{}:t;return Object(ne.e)(a).toSeconds()}),[s]),u=n.a.useMemo((function(){var e=s.containerComponent,t=void 0===e?{}:e,a=t.timeCodeTimeBase,r=void 0===a?{}:a,n=t.startTimecode,i=void 0===n?0:n,c=t.dropFrame,o=void 0!==c&&c;return Object(ne.e)({samples:i,timeBase:r},{dropFrame:o}).toSeconds()}),[s]),d=Object(m.c)(w.d.getShapeBulkyMetadata),j=d.request,b=d.data,h=void 0===b?{}:b;n.a.useEffect((function(){r&&a&&t&&j({itemId:t,shapeId:a,key:"baton_error_".concat(r)})}),[t,a,r,j]);var O=n.a.useMemo((function(){var e=h.field;return(void 0===e?[]:e).filter((function(e){var t=e.start,a=e.end;return"-INF"!==t&&"+INF"!==a})).reduce((function(e,t){var a=t.maps,r=void 0===a?{}:a,n=t.start,i=t.end,c=Object(g.a)(t,ma),o=Object(ne.d)(n).toSeconds()-u,s=Object(ne.d)(i).toSeconds()-u,l=r.map,d=(void 0===l?[]:l).reduce((function(e,t){var a=t.entry,r=(void 0===a?[]:a).reduce((function(e,t){var a=t.key,r=t.value;return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},a,r))}),{});return[].concat(Object(ge.a)(e),[Object(v.a)(Object(v.a)(Object(v.a)({},r),c),{},{startTimecode:o,endTimecode:s})])}),[]);return[].concat(Object(ge.a)(e),Object(ge.a)(d))}),[]).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(L.a)({},t.item,(e[t.item]||[]).concat(t)))}),{})}),[h,u]);return{duration:l,startOfMedia:u,events:O}}(e.highlight),r=a.duration,i=a.startOfMedia,c=a.events,o=n.a.useCallback((function(e){t.current.player.videoEl.currentTime=e}),[t]);return Object.keys(c).length?Object(S.jsxs)(oe.a,{sx:{backgroundColor:"background.paper",padding:1,marginTop:1,borderRadius:1},children:[Object(S.jsx)(se.a,{variant:"subtitle1",children:"Baton report timeline"}),Object.entries(c).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(dt.a,{textAlign:"left",children:Object(S.jsx)(se.a,{variant:"caption",children:a})}),Object(S.jsx)(fa,{onSeek:o,markers:n,duration:r,offset:i})]},a)}))]}):null},va={content:["thumbnail","shape"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"}],"noauth-url":!0,sampleRate:"PAL"},ga={p:["shape.id","shape.tag","id"]},xa=function(){var e=Object(O.g)().itemId,t=n.a.createRef(),a=n.a.useState({itemId:e}),r=Object(h.a)(a,2),i=r[0],c=r[1];return Object(S.jsxs)(_t.a,{container:!0,spacing:2,children:[Object(S.jsxs)(_t.a,{item:!0,xs:6,children:[Object(S.jsx)(m.b,{itemId:e,queryParams:va,children:Object(S.jsx)(ja,{playerRef:t})}),Object(S.jsx)(pa,{highlight:i,videoEl:t})]}),Object(S.jsx)(_t.a,{item:!0,xs:6,children:Object(S.jsx)(m.b,{itemId:e,queryParams:ga,children:Object(S.jsx)(ua,{onHighlight:c})})})]})},ya=a(346),Ca=Object(f.a)((function(e){var t=e.typography,a=e.palette,r=e.spacing,n=e.mixins;return{root:Object(v.a)(Object(v.a)(Object(v.a)({},t.subtitle1),n.toolbar),{},{textTransform:"none",opacity:.8,"&::after":{color:a.primary.main,transition:"width 0.25s ease-in-out 0.05s",borderBottom:"0.25em solid",width:0,position:"absolute",bottom:0,left:0,content:'""'},"&:hover, &.active":{opacity:1,backgroundColor:"unset","&::after":{width:"100%"}},"&:not(:last-child)":{marginRight:r(2)}})}}))(A.a);var Ea=Object(f.a)((function(e){var t=e.spacing;return{root:{backgroundColor:e.palette.background.paper},logo:{height:t(3),width:t(3)}}}))((function(e){var t=e.classes,a=Object(m.d)();return a.userName,a.onLogout,Object(S.jsx)(ya.a,{className:t.root,elevation:0,color:"default",children:Object(S.jsxs)(oe.a,{display:"flex",px:2,height:1,alignItems:"center",justifyContent:"space-between",children:[Object(S.jsx)(be.a,{className:t.logo,variant:"square",src:Y,alt:X}),Object(S.jsxs)(oe.a,{children:[Object(S.jsx)(Ca,{variant:"text",component:o.c,to:"/search",color:"inherit",disableRipple:!0,children:"Home"}),Object(S.jsx)(Ca,{variant:"text",component:o.c,to:"/about",color:"inherit",disableRipple:!0,children:"About"})]}),Object(S.jsx)(be.a,{})]})})})),Aa=new(a(316).a);var Sa=Object(f.a)((function(e){var t=e.mixins,a=e.spacing;return{container:{height:"100vh",overflow:"auto",paddingTop:"calc(".concat(t.toolbar.minHeight,"px + ").concat(a(2),")"),paddingLeft:a(2),paddingRight:a(2)}}}))((function(e){var t=e.classes,a=n.a.useState(),r=Object(h.a)(a,2),i=r[0],c=r[1];return Object(S.jsx)(m.a,{cookieOptions:{maxAge:1209600,path:$},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:Vt,LoginProps:{error:i},children:Object(S.jsx)(p.a,{client:Aa,children:Object(S.jsx)(H,{children:Object(S.jsx)(V,{children:Object(S.jsxs)(N,{children:[Object(S.jsx)(Ea,{}),Object(S.jsx)("div",{className:t.container,children:Object(S.jsxs)(O.d,{children:[Object(S.jsx)(O.b,{exact:!0,path:"/search/:itemId",children:Object(S.jsx)(xa,{})}),Object(S.jsx)(O.b,{exact:!0,path:"/search/",children:Object(S.jsx)(kt,{})}),Object(S.jsx)(O.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(S.jsx)(O.b,{path:"*",children:Object(S.jsx)(Qt,{})})]})})]})})})})})}));c.a.render(Object(S.jsx)(Ze,{children:Object(S.jsx)(l.a,{injectFirst:!0,children:Object(S.jsx)(u.a,{theme:b,children:Object(S.jsx)(s.a,{children:Object(S.jsx)(d.b,{children:Object(S.jsx)(M,{splitters:{vertical:[75,25]},children:Object(S.jsx)(o.a,{basename:$,children:Object(S.jsx)(Sa,{})})})})})})})}),document.getElementById("root"))}},[[227,1,2]]]);